(window.webpackJsonpbucket_erp=window.webpackJsonpbucket_erp||[]).push([[0],{79:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function n(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},80:function(e,t,a){"use strict";var n=a(3),l=a(4),r=a(5),o=a(6),c=a(7),s=a(0),i=a.n(s),d=a(1),m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.w,{style:{marginTop:"72px"}},i.a.createElement(d.g,{md:"12",className:"text-center float-md-none mx-auto"},i.a.createElement("img",{src:"/images/404_mdb.png",alt:"Error 404",className:"img-fluid wow fadeIn animated",style:{visibility:"visible",animationName:"fadeIn",animationIterationCount:1}}))),i.a.createElement(d.w,{className:"mt-5"},i.a.createElement(d.g,{md:"12",className:"text-center mb-5"},i.a.createElement("h2",{className:"h2-responsive wow fadeIn mb-4 animated","data-wow-delay":"0.2s",style:{fontWeight:500,visibility:"visible",animationName:"fadeIn",animationIterationCount:1,animationDelay:"0.2s"}},"Oops! Something went wrong.")))):this.props.children}}]),t}(i.a.Component);t.a=m},81:function(e,t,a){"use strict";var n=a(3),l=a(4),r=a(5),o=a(6),c=a(7),s=a(0),i=a.n(s),d=(a(97),a(15)),m=a(12),u=a(73),p=i.a.createContext(),h=Object(u.a)(p.Consumer),f=a(42);var b=a(1),g=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.w,{style:{marginTop:"72px"}},i.a.createElement(b.g,{md:"12",className:"text-center float-md-none mx-auto"},i.a.createElement("img",{src:"/404_mdb.png",alt:"Error 404",className:"img-fluid wow fadeIn animated",style:{visibility:"visible",animationName:"fadeIn",animationIterationCount:1}}))),i.a.createElement(b.w,{className:"mt-5"},i.a.createElement(b.g,{md:"12",className:"text-center mb-5"},i.a.createElement("h2",{className:"h2-responsive wow fadeIn mb-4 animated","data-wow-delay":"0.2s",style:{fontWeight:500,visibility:"visible",animationName:"fadeIn",animationIterationCount:1,animationDelay:"0.2s"}},"Oops! This obviously isn't a page you were looking for."),i.a.createElement("p",{className:"wow fadeIn animated","data-wow-delay":"0.4s",style:{fontSize:"1.25rem",visibility:"visible",animationName:"fadeIn",animationIterationCount:1,animationDelay:"0.4s"}},"Please, use following link to navigate back to home page."),i.a.createElement(b.g,{md:"6",className:"mx-auto"},i.a.createElement(b.r,{to:"/home"},"Home")))))},E=a(8),v=a(2),y=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.validateLogin=function(e){e.preventDefault(),e.stopPropagation();var t=a.refs.loginForm;!1!==t.checkValidity()?a.handleLogin():t.classList.add("was-validated")},a.handleLogin=function(){var e={method:"POST",body:JSON.stringify({username:a.state.username,password:a.state.password}),headers:{"Content-Type":"application/json"}};fetch("/auth",e).then((function(e){return e.json()})).then((function(e){var t=e.message,n=e.user;if(a.refs.loginLabel.innerHTML=t,"incorrect password"===t)a.password.value="",a.password.focus();else if("username doesn't exist"===t)a.username.value="",a.username.focus();else{if(a.setState({isLoggedIn:!0,user:n},(function(){"undefined"!==typeof Storage?(localStorage.setItem("ui",JSON.stringify(n.id)),localStorage.setItem("uri",JSON.stringify(n.role_id))):alert("Please use another browser to get it working correctly.")})),window.screen.width>576){var l=document.getElementById("main");document.getElementById("sidebar").style.width=" 12%",l.style.width="88%",l.style.marginLeft="12%"}a.props.changeUser(n)}})).catch((function(e){return console.log(e)}))},a.onChangeLabel=function(e){e.target.style.border="none",a.refs.loginLabel.innerHTML=""},a.state={username:"",password:"",isLoggedIn:!1,user:""},a.handleLogin=a.handleLogin.bind(Object(v.a)(a)),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(b.w,{className:"mt-5"},i.a.createElement(b.g,{lg:"4",md:"6",sm:"8",xs:"10",className:"offset-lg-6 offset-md-4 offset-sm-2 offset-xs-0"},i.a.createElement(b.g,null,i.a.createElement(b.c,{className:"cardLogin"},i.a.createElement(b.e,{className:"mb-4 border-0",transparent:!0},i.a.createElement("div",{className:"Avatar "},i.a.createElement("div",{className:"imageLogin "},i.a.createElement("i",{className:"fas fa-user-tie"})))),i.a.createElement(b.d,null,i.a.createElement(b.f,{className:"text-center fontRaleway "},i.a.createElement("span",{className:"colorBlue loginCardHeading"},"User")," ",i.a.createElement("span",{className:"colorGreen loginCardHeading"},"Login")),i.a.createElement("form",{ref:"loginForm",onSubmit:this.validateLogin,noValidate:!0},i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-user-tie inputIcon"}),i.a.createElement("input",{name:"username",value:this.state.username,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.username=t},required:!0,placeholder:"Username",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("div",{className:"valid-feedback"},"Looks good!"),i.a.createElement("div",{className:"invalid-feedback"},"Please enter a valid username.")),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-lock inputIcon"}),i.a.createElement("input",{name:"password",value:this.state.password,onInput:this.handleInput,ref:function(t){return e.password=t},onChange:this.onChangeLabel,type:"password",required:!0,className:"fontRaleway inputText pl-5 form-control",placeholder:"Password"}),i.a.createElement("div",{className:"valid-feedback"},"Looks good!"),i.a.createElement("div",{className:"invalid-feedback"},"Please enter a valid password.")),i.a.createElement("div",{className:"mt-3"},i.a.createElement("button",{type:"submit",className:"fontRaleway loginSubmitBtn my-2"},"Log In")),i.a.createElement("div",{className:"text-center m-0 p-0 "},i.a.createElement("label",{ref:"loginLabel",className:"m-0 p-0 validatingLabel"}),i.a.createElement("br",null),i.a.createElement("span",{className:"colorBlue"},"Forgot")," ",i.a.createElement("span",{className:"colorGreen"},"Password")," ",i.a.createElement("span",{className:"colorBlue"},"?"))))))))}}]),t}(i.a.Component),N=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).loggedIn=!1,e.user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!0===this.loggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(y,{changeUser:this.props.changeUser})}}]),t}(s.Component),I=a(23),w=a(16),C=a(82);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,c=new Array(l),s=0;s<l;s++)c[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).handleChange=function(e){a.props.handleChange(e)},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.options,n=t.selectedValue,l=t.placeHolder,r=t.iconClass,o=t.isMulti,c=t.required,s=t.Entities,d=t.isOptionDisabled,m=t.withOutIcon,u={control:function(e,t){return O({},e,{borderColor:t.isFocused?"#ddd":c?null!==n?"#ddd":"red":"#ddd",background:m?"":"#ebebeb",borderRadius:m?"4px":"7px"})},valueContainer:function(e,t){return O({},e,{background:m?"":"#ebebeb",paddingLeft:m?12:46,maxHeight:"35px",fontWeight:400,borderRadius:"7px",fontFamily:"Raleway"})},multiValue:function(e,t){return O({},e,{background:"#112648",color:"white",maxWidth:"110px",borderRadius:"5px"})},multiValueLabel:function(e,t){t.data;return O({},e,{color:"#cedd88"})},multiValueRemove:function(e){return O({},e,{background:"#cedd88",color:"#112648",borderBottomLeftRadius:"0px",borderBottomRightRadius:"5px",borderTopLeftRadius:"0px",borderTopRightRadius:"5px"})}},p=s&&s.map((function(e){return{key:e.id,label:e.name,value:e.id,color:e.id%2===0?"#112648":"#687722"}}));return i.a.createElement(C.a,{closeMenuOnSelect:!o,value:n,onChange:this.handleChange,components:{Option:function(t){var a=t.innerProps,n=t.innerRef;return i.a.createElement("div",Object.assign({ref:n},a),i.a.createElement("div",{className:"text-left ml-2 pl-2 mt-1 fontRaleway selectOption",style:{color:"".concat(t.data.color),fontWeight:"500",cursor:"pointer"}},e.props.isMulti&&i.a.createElement("input",{type:"checkbox",checked:t.isSelected,onChange:function(){}}),t.data.label))},ValueContainer:function(e){var t=e.children,a=Object(I.a)(e,["children"]);return w.z.ValueContainer&&i.a.createElement(w.z.ValueContainer,a,!!t&&i.a.createElement("i",{className:"".concat(r," inputIcon"),style:{left:13,padding:"0px"}}),t)},DropdownIndicator:function(e){return w.z.DropdownIndicator&&i.a.createElement(w.z.DropdownIndicator,e,i.a.createElement("i",{className:"fa fa-chevron-down","aria-hidden":"true",style:{color:"#112648"}}))},IndicatorSeparator:function(e){var t=e.innerProps;return i.a.createElement("span",Object.assign({style:{alignSelf:"stretch",backgroundColor:"#112648",width:"0.1pc",marginTop:8,marginBottom:8}},t))}},options:a||p,isMulti:o,hideSelectedOptions:!1,styles:u,placeholder:l,isClearable:!0,isSearchable:!0,isOptionDisabled:d})}}]),t}(s.Component),T=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,c=new Array(l),s=0;s<l;s++)c[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={modalShow:!1},a.toggle=function(){a.setState({modalShow:!a.state.modalShow})},a.handleClick=function(){a.toggle(),a.props.history.push("/login")},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.vendor;return i.a.createElement(b.m,{size:"md",centered:!0,backdrop:!0,animation:"right",modalStyle:"info",isOpen:this.state.modalShow,toggle:function(){}},i.a.createElement(b.p,{className:"text-center"},"Welcome ",e.name,"!"),i.a.createElement(b.n,{className:"text-center"},i.a.createElement("h5",null," You are registered successfully as a ",i.a.createElement("b",{className:"text-info"},"Seller"),".",i.a.createElement("br",null)," Following are your ",i.a.createElement("b",{className:"text-info"},"login")," credentials:"),i.a.createElement("br",null),i.a.createElement("h3",{className:"text-info"},i.a.createElement("small",{className:"text-muted"}," Username:  "),e.username,i.a.createElement("br",null),i.a.createElement("small",{className:"text-muted"},"Password:  "),e.password),i.a.createElement("h6",null," ",i.a.createElement("b",null,"Note:")," Your username is also your ",i.a.createElement("b",{className:"text-info"},"Vendor ID"),".")),i.a.createElement(b.o,null,i.a.createElement(b.b,{size:"sm",onClick:this.handleClick,color:"info"},"Ok")))}}]),t}(i.a.Component),S=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){a.setState({bankName:e})},a.handleNextButtonClick=function(e){var t,a,n,l,r=document.getElementById("progressbar"),o=document.getElementsByTagName("fieldset");if(n)return!1;n=!0,a=(t=e.target.parentNode.parentNode).nextElementSibling;for(var c=0;c<o.length;c++)if(o[c]===a){l=c;break}r.childNodes[l].classList.add("active"),t.style.display="none",a.style.display="block"},a.handlePreviousButtonClick=function(e){var t,a,n,l,r=document.getElementById("progressbar"),o=document.getElementsByTagName("fieldset");if(n)return!1;n=!0,a=(t=e.target.parentNode.parentNode).previousElementSibling;for(var c=0;c<o.length;c++)if(o[c]===t){l=c;break}r.childNodes[l].classList.remove("active"),t.style.display="none",a.style.display="block"},a.handleSubmit=function(e){e.preventDefault();var t=a.props.allData,n=document.getElementById("msform");if(!1!==n.checkValidity())if(""!==a.state.bankName&&null!==a.state.bankName){var l=t.allRoles.filter((function(e){return"vendor"===e.name.toLowerCase()})).shift(),r=a.state,o=r.name,c=r.email,s=r.cell,i=r.address,d=r.cnic,m=r.shopName,u=r.shopAddress,p=r.shopCell,h=r.bankName,f=r.branchName,b=r.branchCode,g=r.accountTitle,E=r.accountNumber,v=r.ibanNumber,y=d.substring(0,5).substring(0,3).split("").reverse().join(""),N=d.substring(0,5).substring(3).split("").reverse().join(""),I=d.substring(d.length-3).split("").reverse().join(""),w="bkt".concat(N).concat(I).concat(y,"V"),C={roleId:l&&l.id,name:o,email:c,cell:s,address:i,username:w,password:"12345",cnic:d,shopName:m,shopAddress:u,shopCell:p,bankName:h.value,branchName:f,branchCode:b,accountTitle:g,accountNumber:E,ibanNumber:v},x={method:"POST",body:JSON.stringify(C),headers:{"Content-Type":"application/json"}};fetch("/addNewUser",x).then((function(e){return e.json()})).then((function(e){if(!0===e.success){var t=e.data;a.setState({name:"",email:"",cell:"",address:"",cnic:"",shopName:"",shopAddress:"",shopCell:"",bankName:"",branchName:"",branchCode:"",accountTitle:"",accountNumber:"",ibanNumber:"",vendor:t}),a.refs.welcomeVendorModal.setState({modalShow:!0})}else a.name.focus();a._isMounted&&setTimeout((function(){return a.setState({notificationShow:!1})}),1502)})).catch((function(e){return console.log(e)}))}else a.setState({bankName:null});else n.classList.add("was-validated")},a.onChangeLabel=function(){a.refs.signUpLabel.innerHTML=""},a.state={name:"",email:"",cell:"",address:"",cnic:"",shopName:"",shopAddress:"",shopCell:"",bankName:"",branchName:"",branchCode:"",accountTitle:"",accountNumber:"",ibanNumber:"",vendor:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,l=t.cell,r=t.address,o=t.cnic,c=t.shopName,s=t.shopAddress,d=t.shopCell,m=t.bankName,u=t.branchName,p=t.branchCode,h=t.accountTitle,f=t.accountNumber,g=t.ibanNumber,E=t.vendor;return i.a.createElement(b.w,{center:!0,className:"mt-2 p-0"},i.a.createElement(b.g,{xl:"6",lg:"8",md:"8",sm:"10",xs:"12",className:"p-0 offset-xl-1 offset-lg-1"},i.a.createElement("form",{id:"msform",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("ul",{id:"progressbar",className:"fontRaleway text-center"},i.a.createElement("li",{className:"active"},"Personal Details"),i.a.createElement("li",null,"Business Details"),i.a.createElement("li",null,"Bank Details")),i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fs-title text-center"},"Personal Details"),i.a.createElement("h3",{className:"fs-subtitle text-center"},"Tell us something about you"),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-user-tie inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Your Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-envelope inputIcon",style:{paddingLeft:"13px"}}),i.a.createElement("input",{name:"email",value:n,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.email=t},required:!0,placeholder:"Email",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-mobile-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"cell",value:l,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.cell=t},required:!0,placeholder:"Phone",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"address",value:r,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.address=t},required:!0,placeholder:"Address",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-id-card inputIcon",style:{paddingLeft:"13px"}}),i.a.createElement("input",{name:"cnic",value:o,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.cnic=t},pattern:"^[0-9]{13}",required:!0,placeholder:"CNIC",maxLength:"13",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("p",{className:"invalid-feedback"}," ",i.a.createElement("small",{className:"pl-3 m-0"},"CNIC must follow the '0000000000000' format !"))),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"button",name:"next",onClick:this.handleNextButtonClick,className:"next action-button",value:"Next"}))),i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fs-title text-center"},"Business Details"),i.a.createElement("h3",{className:"fs-subtitle text-center"},"Your presence in business"),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-store inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"shopName",value:c,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.shopName=t},required:!0,placeholder:"Shop Name",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"shopAddress",value:s,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.shopAddress=t},required:!0,placeholder:"Shop Address",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-mobile-alt inputIcon",style:{paddingLeft:"17px"}}),i.a.createElement("input",{name:"shopCell",value:d,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.shopCell=t},required:!0,placeholder:"Shop Phone",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"button",name:"previous",onClick:this.handlePreviousButtonClick,className:"previous action-button-previous",value:"Back"}),i.a.createElement("input",{type:"button",name:"next",onClick:this.handleNextButtonClick,className:"next action-button",value:"Next"}))),i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fs-title text-center"},"Bank Details"),i.a.createElement("h3",{className:"fs-subtitle text-center"},"Fill in your bank account details"),i.a.createElement("div",{className:"my-3"},i.a.createElement(k,{options:[{key:1,label:"HBL",value:"hbl",color:"#112648"},{key:2,label:"MCB",value:"mcb",color:"#687722"}],handleChange:this.handleSelectChange,placeHolder:"Bank Name*",selectedValue:m,iconClass:"fa fa-university",required:!0,isMulti:!1})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-hand-holding-usd inputIcon"}),i.a.createElement("input",{name:"branchName",value:u,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.branchName=t},required:!0,placeholder:"Branch Name",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-qrcode inputIcon"}),i.a.createElement("input",{name:"branchCode",value:p,onInput:this.handleInput,onChange:this.onChangeLabel,type:"number",ref:function(t){return e.branchCode=t},required:!0,placeholder:"Branch Code",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-book inputIcon"}),i.a.createElement("input",{name:"accountTitle",value:h,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.accountTitle=t},required:!0,placeholder:"A/C Title",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-portrait inputIcon"}),i.a.createElement("input",{name:"accountNumber",value:f,onInput:this.handleInput,onChange:this.onChangeLabel,type:"number",ref:function(t){return e.accountNumber=t},required:!0,placeholder:"A/C #",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mt-3 "},i.a.createElement("i",{className:"fa fa-credit-card inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"ibanNumber",value:g,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.ibanNumber=t},required:!0,placeholder:"IBAN #",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("label",{ref:"signUpLabel",className:"m-0 p-0 validatingLabel"}),i.a.createElement("br",null),i.a.createElement("input",{type:"button",name:"previous",onClick:this.handlePreviousButtonClick,className:"previous action-button-previous mb-0",value:"Back"}),i.a.createElement("input",{type:"submit",name:"submit",className:"submit action-button mb-0",value:"Submit"}))))),i.a.createElement(T,Object.assign({vendor:E,ref:"welcomeVendorModal"},this.props)))}}]),t}(i.a.Component),j=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).loggedIn=!1,e.user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!0===this.loggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(S,this.props)}}]),t}(s.Component),D=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){a.setState({bankName:e})},a.handleNextButtonClick=function(e){var t,a,n,l,r=document.getElementById("progressbar"),o=document.getElementsByTagName("fieldset");if(n)return!1;n=!0,a=(t=e.target.parentNode.parentNode).nextElementSibling;for(var c=0;c<o.length;c++)if(o[c]===a){l=c;break}r.childNodes[l].classList.add("active"),a.style.display="block",t.style.display="none"},a.handlePreviousButtonClick=function(e){var t,a,n,l,r=document.getElementById("progressbar"),o=document.getElementsByTagName("fieldset");if(n)return!1;n=!0,a=(t=e.target.parentNode.parentNode).previousElementSibling;for(var c=0;c<o.length;c++)if(o[c]===t){l=c;break}r.childNodes[l].classList.remove("active"),a.style.display="block",t.style.display="none"},a.handleSubmit=function(e){e.preventDefault();var t=a.editVendorForm;if(!1!==t.checkValidity())if(""!==a.state.bankName&&null!==a.state.bankName){var n=a.state,l=n.name,r=n.email,o=n.cell,c=n.address,s=n.cnic,i=n.shopName,d=n.shopAddress,m=n.shopCell,u=n.bankName,p=n.branchName,h=n.branchCode,f=n.accountTitle,b=n.accountNumber,g=n.ibanNumber,E=(n.roleId,n.username),v=n.password,y={id:a.vendorId,name:l,email:r,cell:o,address:c,username:E,password:v,cnic:s,shopName:i,shopAddress:d,shopCell:m,bankName:u.value,branchName:p,branchCode:h,accountTitle:f,accountNumber:b,ibanNumber:g},N={method:"PUT",body:JSON.stringify(y),headers:{"Content-Type":"application/json"}};fetch("/updateUser",N).then((function(e){return e.json()})).then((function(e){if(!0===e.success){var t=e.data;a.setState({name:"",email:"",cell:"",address:"",cnic:"",shopName:"",shopAddress:"",shopCell:"",bankName:"",branchName:"",branchCode:"",accountTitle:"",accountNumber:"",ibanNumber:"",vendor:t}),window.location.reload()}else a.name.focus();a._isMounted&&setTimeout((function(){return a.setState({notificationShow:!1})}),1502)})).catch((function(e){return console.log(e)}))}else a.setState({bankName:null});else t.classList.add("was-validated")},a.onChangeLabel=function(){a.refs.signUpLabel.innerHTML=""};var l=new URLSearchParams(window.location.search);a.vendorId=Number(l.get("vendor"));var c=e.allData.allUsers.filter((function(e){return e.id===a.vendorId})).shift();return a.state={name:c&&c.name,email:c&&c.email,cell:c&&c.cell,address:c&&c.address,cnic:c&&c.cnic,shopName:c&&c.shop_name,shopAddress:c&&c.shop_address,shopCell:c&&c.shop_cell,bankName:c&&{key:Math.random(),label:c.bank_name.toUpperCase(),value:c.bank_name},branchName:c&&c.branch_name,branchCode:c&&c.branch_code,accountTitle:c&&c.account_title,accountNumber:c&&c.account_id,ibanNumber:c&&c.iban_id,username:c&&c.username,password:c&&c.password,vendor:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,l=t.cell,r=t.address,o=t.shopName,c=t.shopAddress,s=t.shopCell,d=t.bankName,m=t.branchName,u=t.branchCode,p=t.accountTitle,f=t.accountNumber,g=t.ibanNumber,E=t.password;return i.a.createElement(h,{I:"edit",a:"vendor"},i.a.createElement(b.w,{center:!0,className:"mt-2 p-0"},i.a.createElement(b.g,{xl:"6",lg:"8",md:"8",sm:"10",xs:"12",className:"p-0 offset-xl-2 offset-lg-2"},i.a.createElement("form",{id:"msform",ref:function(t){return e.editVendorForm=t},className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("ul",{id:"progressbar",className:"fontRaleway text-center"},i.a.createElement("li",{className:"active"},"Personal Details"),i.a.createElement("li",null,"Business Details"),i.a.createElement("li",null,"Bank Details")),i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fs-title text-center"},"Personal Details"),i.a.createElement("h3",{className:"fs-subtitle text-center"},"Tell us something about you"),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-user-tie inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Your Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-envelope inputIcon",style:{paddingLeft:"13px"}}),i.a.createElement("input",{name:"email",value:n,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.email=t},required:!0,disabled:!0,placeholder:"Email",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-mobile-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"cell",value:l,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.cell=t},required:!0,placeholder:"Phone",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"address",value:r,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.address=t},required:!0,placeholder:"Address",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-lock inputIcon",style:{paddingLeft:"13px"}}),i.a.createElement("input",{name:"password",value:E,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.password=t},required:!0,placeholder:"Your Password*",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("p",{className:"colorBlue"}," ",i.a.createElement("small",{className:"pl-3 m-0"},"You can change your password here."))),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"button",name:"next",onClick:this.handleNextButtonClick,className:"next action-button",value:"Next"}))),i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fs-title text-center"},"Business Details"),i.a.createElement("h3",{className:"fs-subtitle text-center"},"Your presence in business"),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-store inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"shopName",value:o,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.shopName=t},required:!0,placeholder:"Shop Name",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"shopAddress",value:c,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.shopAddress=t},required:!0,placeholder:"Shop Address",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-mobile-alt inputIcon",style:{paddingLeft:"17px"}}),i.a.createElement("input",{name:"shopCell",value:s,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.shopCell=t},required:!0,placeholder:"Shop Phone",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"button",name:"previous",onClick:this.handlePreviousButtonClick,className:"previous action-button-previous",value:"Back"}),i.a.createElement("input",{type:"button",name:"next",onClick:this.handleNextButtonClick,className:"next action-button",value:"Next"}))),i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fs-title text-center"},"Bank Details"),i.a.createElement("h3",{className:"fs-subtitle text-center"},"Fill in your bank account details"),i.a.createElement("div",{className:"my-3"},i.a.createElement(k,{options:[{key:1,label:"HBL",value:"hbl",color:"#112648"},{key:2,label:"MCB",value:"mcb",color:"#687722"}],handleChange:this.handleSelectChange,placeHolder:"Bank Name*",selectedValue:d,iconClass:"fa fa-university",required:!0,isMulti:!1})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-hand-holding-usd inputIcon"}),i.a.createElement("input",{name:"branchName",value:m,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.branchName=t},required:!0,placeholder:"Branch Name",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-qrcode inputIcon"}),i.a.createElement("input",{name:"branchCode",value:u,onInput:this.handleInput,onChange:this.onChangeLabel,type:"number",ref:function(t){return e.branchCode=t},required:!0,placeholder:"Branch Code",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-book inputIcon"}),i.a.createElement("input",{name:"accountTitle",value:p,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.accountTitle=t},required:!0,placeholder:"A/C Title",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"my-3"},i.a.createElement("i",{className:"fa fa-portrait inputIcon"}),i.a.createElement("input",{name:"accountNumber",value:f,onInput:this.handleInput,onChange:this.onChangeLabel,type:"number",ref:function(t){return e.accountNumber=t},required:!0,placeholder:"A/C #",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mt-3 "},i.a.createElement("i",{className:"fa fa-credit-card inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"ibanNumber",value:g,onInput:this.handleInput,onChange:this.onChangeLabel,type:"text",ref:function(t){return e.ibanNumber=t},required:!0,placeholder:"IBAN #",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("label",{ref:"signUpLabel",className:"m-0 p-0",style:{fontFamily:"monospace",color:"red"}}),i.a.createElement("br",null),i.a.createElement("input",{type:"button",name:"previous",onClick:this.handlePreviousButtonClick,className:"previous action-button-previous mb-0",value:"Back"}),i.a.createElement("input",{type:"submit",name:"submit",className:"submit action-button mb-0",value:"Submit"})))))))}}]),t}(i.a.Component),P=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).loggedIn=!1,e.user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(h,{I:"update",a:"vendor"},i.a.createElement(D,this.props))}}]),t}(s.Component),R=a(13),B=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,c=new Array(l),s=0;s<l;s++)c[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={modalShow:!1},a.toggle=function(){a.setState({modalShow:!a.state.modalShow})},a.deleteEntry=function(){a.props.deleteEntry(),a.toggle()},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(b.i,null,i.a.createElement(b.m,{modalStyle:"danger",className:"text-white",size:"md",centered:!0,backdrop:!0,isOpen:this.state.modalShow,toggle:this.toggle},i.a.createElement(b.p,{className:"text-center",titleClass:"w-100",tag:"p",toggle:this.toggle},i.a.createElement("b",null,"Are you sure?"),i.a.createElement("br",null),"Record will be deleted permanently."),i.a.createElement(b.n,{className:"text-center"},i.a.createElement(b.k,{icon:"times",size:"6x",className:"animated rotateIn"})),i.a.createElement(b.o,{className:"justify-content-center"},i.a.createElement(b.b,{color:"danger",onClick:this.deleteEntry},"Yes"),i.a.createElement(b.b,{color:"danger",outline:!0,onClick:this.toggle},"No"))))}}]),t}(s.Component),_=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.cardHeading,a=e.permissionEntity,n=e.redirectToNewEntityPath,l=e.addButtonEntityLabel,r=e.tableId,o=e.data,c={fontSize:"17px",borderRadius:"4px",color:"white"};return i.a.createElement(b.c,{style:{marginTop:"50px",borderRadius:"15px"}},i.a.createElement(b.e,{tag:"h3",className:"text-center text-white font-weight-bold backGround-green",style:{borderTopRightRadius:"15px",borderTopLeftRadius:"15px"}},t),i.a.createElement(b.d,null,"vendor"!==a&&"inventoryHistories"!==a&&"orderDetail"!==a&&"invoiceDetail"!==a&&i.a.createElement(h,{I:"create",a:a},i.a.createElement("div",{className:"row justify-content-center d-md-none"},i.a.createElement("button",{style:c,onClick:n,className:"btn py-1 px-2 font-weight-bold backGround-blue borderBlue"},"Add New ",l)),i.a.createElement("div",{className:"row justify-content-end d-none d-md-flex no-gutters"},i.a.createElement("button",{style:c,onClick:n,className:"btn py-1 px-2 font-weight-bold backGround-blue borderBlue"},"Add New ",l))),i.a.createElement(b.j,{id:r,small:!0,hover:!0,entriesLabel:"Show",bordered:!0,searchLabel:"",entries:12,entriesOptions:[5,10,20,35,55,70,100,135],responsive:!0,data:o,theadTextWhite:!0})))}}]),t}(s.Component),L=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){"Users"===a.props.allPersons&&a.props.history.push({pathname:"/users/edit",search:"user=".concat(e)}),"Vendors"===a.props.allPersons&&a.props.history.push({pathname:"/vendors/edit",search:"vendor=".concat(e)})}},a.redirectToNewEntityPath=function(){"Users"===a.props.allPersons&&a.props.history.push("/users/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,personToBeDeleted:e}),a.refs.deleteModal.setState({modalShow:!0})}},a.deletePerson=function(){var e=a.state,t=e.rowToBeDeleted,n={value:e.personToBeDeleted},l={method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/deleteUser",l).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&document.getElementById("allPersonsTable").deleteRow(t)})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={allUsers:e.allData.allUsers,rowToBeDeleted:"",personToBeDeleted:"",allRoles:e.allData.allRoles},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.state,n=a.allUsers,l=a.allRoles,r=[],o=0,c=this.props.allPersons,s={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};switch(c){case"Users":n&&n.forEach((function(e){var a;o+=1,l&&l.forEach((function(t){t.id===e.role_id&&(a=t.name)})),r.push({index:o,name:e.name,email:e.email,cell:e.cell,address:e.address,username:"super_admin"===a?"superAdmin":e.username,role:a,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"super_admin"===a?"superAdmin":"user"},i.a.createElement(b.b,{style:s,color:"white",onClick:t.handleEdit(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"super_admin"===a?"superAdmin":"user"},i.a.createElement(b.b,{style:s,color:"white",onClick:t.handleDelete(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})})),e={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"Email",field:"email"},{label:"Cell",field:"cell"},{label:"Address",field:"address"},{label:"Username",field:"username"},{label:"Role",field:"role"},{label:"Action",field:"buttons"}],rows:r};break;case"Vendors":var d;l&&l.forEach((function(e){"vendor"===e.name&&(d=e.id)})),(n&&n.filter((function(e){return e.role_id===d}))).forEach((function(e){o+=1,r.push({index:o,name:e.name,email:e.email,cell:e.cell,address:e.address,cnic:e.cnic,shopName:e.shop_name,shopAddress:e.shop_address,shopCell:e.shop_cell,bankName:e.bank_name,branchName:e.branch_name,branchCode:e.branch_code,accountTitle:e.account_title,accountNo:e.account_id,ibanNo:e.iban_id,username:e.username,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"vendor"},i.a.createElement(b.b,{style:s,color:"white",onClick:t.handleEdit(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"vendor"},i.a.createElement(b.b,{style:s,color:"white",onClick:t.handleDelete(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})})),e={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"Email",field:"email"},{label:"Cell",field:"cell"},{label:"Address",field:"address"},{label:"CNIC",field:"cnic"},{label:"Shop",field:"shopName"},{label:"Shop-Address",field:"shopAddress"},{label:"Shop-Phone",field:"shopCell"},{label:"Bank",field:"bankName"},{label:"Branch",field:"branchName"},{label:"Br. Code",field:"branchCode"},{label:"A/C Title",field:"accountTitle"},{label:"A/C #",field:"accountNo"},{label:"IBAN",field:"ibanNo"},{label:"Username",field:"username"},{label:"Action",field:"buttons"}],rows:r}}return i.a.createElement(h,{I:"read",a:"Users"===c?"user":"vendor"},i.a.createElement(_,{cardHeading:c,permissionEntity:"Users"===c?"user":"vendor",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Users"===c?"User":"",tableId:"allPersonsTable",data:e}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deletePerson}))}}]),t}(s.Component),M=function(e){var t=Object(R.a)({},e);return i.a.createElement(h,{I:"read",a:"vendor"},i.a.createElement(L,Object.assign({allPersons:"Vendors"},t)))},V=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"vendor"}," ",i.a.createElement(M,this.props))}}]),t}(s.Component),A=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/vendors/signup",render:function(e){return i.a.createElement(j,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/vendors/edit",render:function(){return i.a.createElement(P,{allData:t})}}),i.a.createElement(m.b,{path:"/vendors/all",render:function(e){return i.a.createElement(V,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))},q=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.r,{to:"/users/roles/new"},"Create Role"),i.a.createElement(b.r,{to:"/users/new"},"Create User"),i.a.createElement(b.r,{to:"/products/brands/new"},"Create Brand"),i.a.createElement(b.r,{to:"/products/categories/new"},"Create Product-Category"),i.a.createElement(b.r,{to:"/products/new"},"Create Product"),i.a.createElement(b.r,{to:"/inventories/update"},"Update Inventory"),i.a.createElement(b.r,{to:{pathname:"/orders/new",search:"type=sale"}},"Create Sale"),i.a.createElement(b.r,{to:"/orders/all"},"All Order"),i.a.createElement(b.r,{to:"/orders/order_details"},"All Order-Details"))},F=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(q,{allData:this.props.allData})}}]),t}(s.Component),U=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){a.setState({selectedRole:e})},a.handleSubmit=function(e){e.preventDefault();var t=a.refs.newUserForm;if(a.state.selectedRole)if(!1!==t.checkValidity()){var n=a.state,l=n.selectedRole,r=n.name,o=n.email,c=n.cell,s=n.address,i=n.username,d=n.password,m={roleId:l.value,name:r,email:o,cell:c,address:s,username:i,password:d},u={method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}};fetch("/addNewUser",u).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e.success?a.setState({name:"",email:"",cell:"",address:"",username:"",password:"",selectedRole:""}):a.username.focus()})).catch((function(e){return console.log(e)}))}else t.classList.add("was-validated");else a.setState({selectedRole:null})},a._isMounted=!0,a.state={name:"",email:"",cell:"",address:"",username:"",password:"",selectedRole:"",notificationMessage:"",notificationShow:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,l=t.cell,r=t.address,o=t.username,c=t.password,s=t.selectedRole,d=this.props.allData;return i.a.createElement(h,{I:"create",a:"user"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"newUserForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"New User"),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:d.allRoles,handleChange:this.handleSelectChange,placeHolder:"Select Role..*",selectedValue:s,iconClass:"fa fa-user-tag",required:!0,isMulti:!1,isOptionDisabled:function(e){return"vendor"===e.label.toLowerCase()}})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-envelope inputIcon"}),i.a.createElement("input",{name:"email",value:n,onInput:this.handleInput,onChange:function(){},type:"email",ref:function(t){return e.email=t},required:!0,placeholder:"Email*",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("div",{className:"invalid-feedback ml-2 p-0"},i.a.createElement("small",null,"Please enter a valid email."))),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-phone inputIcon"}),i.a.createElement("input",{name:"cell",value:l,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.cell=t},placeholder:"Cell",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon"}),i.a.createElement("input",{name:"address",value:r,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.address=t},placeholder:"Address",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-user inputIcon"}),i.a.createElement("input",{name:"username",value:o,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.username=t},required:!0,placeholder:"Username",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-lock inputIcon"}),i.a.createElement("input",{name:"password",value:c,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.password=t},required:!0,placeholder:"Password*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Create.."})))))))}}]),t}(s.Component),H=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"user"},i.a.createElement(U,{allData:e}))}}]),t}(s.Component),W=function(e){var t=Object(R.a)({},e);return i.a.createElement(h,{I:"read",a:"user"},i.a.createElement(L,Object.assign({allPersons:"Users"},t)))},z=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"user"}," ",i.a.createElement(W,this.props))}}]),t}(s.Component),Y=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.onKeyPress=function(e){101!==e.which&&45!==e.which&&43!==e.which||e.preventDefault()},a.handleRoleChange=function(e){a.setState({selectedRole:e,editingVendor:"vendor"===e.label.toLowerCase()})},a.handleBankNameChange=function(e){a.setState({bankName:e})},a.componentDidMount=function(){a.handleRoleChange(a.selectedRole),a.setState({bankName:a.selectedBankName})},a.handleSubmit=function(e){e.preventDefault();var t=a.refs.editUserForm;if(!1!==t.checkValidity())if(a.state.selectedRole)if(!a.state.editingVendor||a.state.bankName){var n=a.state,l=n.selectedRole,r=n.name,o=n.email,c=n.cell,s=n.address,i=n.username,d=n.password,m=n.cnic,u=n.shopName,p=n.shopCell,h=n.shopAddress,f=n.bankName,b=n.branchName,g=n.branchCode,E=n.accountNumber,v=n.accountTitle,y=n.ibanNumber,N=n.editingVendor,I=n.costPricePercent,w=n.retailPricePercent,C={id:a.userId,name:r,email:o,cell:c,address:s,password:d,cnic:m,shopName:u,shopAddress:h,shopCell:p,bankName:f.value,branchName:b,branchCode:g,accountTitle:v,accountNumber:E,ibanNumber:y,username:i,costPricePercent:Number(I),retailPricePercent:Number(w)},x={id:a.userId,name:r,email:o,cell:c,address:s,username:i,password:d,cnic:null,shopName:null,shopAddress:null,shopCell:null,bankName:null,branchName:null,branchCode:null,accountTitle:null,accountNumber:null,ibanNumber:null,roleId:l.value},O={method:"PUT",body:JSON.stringify(N?C:x),headers:{"Content-Type":"application/json"}};fetch("/updateUser",O).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e.success?(a.setState({name:"",email:"",cell:"",address:"",username:"",password:"",selectedRole:"",cnic:"",shopName:"",shopAddress:"",shopCell:"",bankName:"",branchName:"",branchCode:"",accountTitle:"",accountNumber:"",ibanNumber:"",retailPricePercent:"",costPricePercent:""}),window.location.reload()):a.username.focus()})).catch((function(e){return console.log(e)}))}else a.setState({bankName:null});else a.setState({selectedRole:null});else t.classList.add("was-validated")},a._isMounted=!0;var l=new URLSearchParams(window.location.search),c=e.allData;a.userId=Number(l.get("user"));var s=c.allUsers&&c.allUsers.filter((function(e){return e.id===a.userId})).shift(),i=s&&c.allRoles&&c.allRoles.filter((function(e){return e.id===s.role_id})).shift();return a.selectedRole=i&&{key:i.id,label:i.name,value:i.id,color:i.id%2===0?"#112648":"#687722"},a.selectedBankName=i&&"vendor"===i.name&&{key:s.id,label:s.bank_name,value:s.bank_name,color:s.id%2===0?"#112648":"#687722"},a.state={name:s&&s.name,email:s&&s.email,cell:s&&s.cell,address:s&&s.address,username:s&&s.username,password:s&&s.password,selectedRole:"",cnic:"vendor"===i.name?s.cnic:"",shopName:"vendor"===i.name?s.shop_name:"",shopAddress:"vendor"===i.name?s.shop_address:"",shopCell:"vendor"===i.name?s.shop_cell:"",bankName:"",branchName:"vendor"===i.name?s.branch_name:"",branchCode:"vendor"===i.name?s.branch_code:"",accountTitle:"vendor"===i.name?s.account_title:"",accountNumber:"vendor"===i.name?s.account_id:"",ibanNumber:"vendor"===i.name?s.iban_id:"",notificationMessage:"",notificationShow:!1,editingVendor:!1,retailPricePercent:"vendor"===i.name?s.retail_price_percent:"",costPricePercent:"vendor"===i.name?s.cost_price_percent:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedRole,n=t.name,l=t.email,r=t.cell,o=t.address,c=t.username,s=t.password,d=t.cnic,m=t.shopName,u=t.shopCell,p=t.shopAddress,f=t.bankName,g=t.branchName,E=t.branchCode,v=t.accountNumber,y=t.accountTitle,N=t.ibanNumber,I=t.editingVendor,w=t.costPricePercent,C=t.retailPricePercent,x=this.props.allData;return i.a.createElement(h,{I:"update",a:"user"},i.a.createElement("form",{ref:"editUserForm",className:"mb-4 mt-4 p-0",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement(b.w,{center:!0},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("fieldset",{className:"w-100 pb-0"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"Edit User"),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:x.allRoles,handleChange:this.handleRoleChange,placeHolder:"Select Role..*",selectedValue:a,iconClass:"fa fa-user-tag",required:!0,isMulti:!1,isOptionDisabled:function(e){return"vendor"===e.label.toLowerCase()}})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:n,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-envelope inputIcon"}),i.a.createElement("input",{name:"email",value:l||"",onInput:this.handleInput,onChange:function(){},type:"email",ref:function(t){return e.email=t},required:!0,placeholder:"Email*",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("div",{className:"invalid-feedback ml-2 p-0"},i.a.createElement("small",null,"Please enter a valid email."))),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-phone inputIcon"}),i.a.createElement("input",{name:"cell",value:r||"",onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.cell=t},placeholder:"Cell",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon"}),i.a.createElement("input",{name:"address",value:o||"",onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.address=t},placeholder:"Address",className:"fontRaleway inputText pl-5 form-control"})),I?null:i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-user inputIcon"}),i.a.createElement("input",{name:"username",value:c,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.username=t},required:!0,placeholder:"Username",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-lock inputIcon"}),i.a.createElement("input",{name:"password",value:s,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.password=t},required:!0,placeholder:"Password*",className:"fontRaleway inputText pl-5 form-control"})),I?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-id-card inputIcon",style:{paddingLeft:"13px"}}),i.a.createElement("input",{name:"cnic",value:d,onInput:this.handleInput,type:"text",onChange:function(){},ref:function(t){return e.cnic=t},pattern:"^[0-9]{13}",required:!0,placeholder:"CNIC",maxLength:"13",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("p",{className:"invalid-feedback"}," ",i.a.createElement("small",{className:"pl-3 m-0"},"CNIC must follow the '0000000000000' format !"))),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-store inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"shopName",value:m,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.shopName=t},required:!0,placeholder:"Shop Name",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"m-0"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon",style:{paddingLeft:"16px"}}),i.a.createElement("input",{name:"shopAddress",value:p,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.shopAddress=t},required:!0,placeholder:"Shop Address",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2 pb-1"},i.a.createElement("h3",{className:"font-weight-bold colorBlue text-right m-0 p-0"},"...."))):null,I?null:i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Update.."})))),I?i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("fieldset",{className:"w-100 pb-2 pt-0"},i.a.createElement("div",{className:"mt-1 mb-3 p-0"},i.a.createElement("h3",{className:"font-weight-bold colorBlue text-left m-0"},"....")),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-mobile-alt inputIcon",style:{paddingLeft:"17px"}}),i.a.createElement("input",{name:"shopCell",value:u,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.shopCell=t},required:!0,placeholder:"Shop Phone",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{options:[{key:1,label:"HBL",value:"HBL",color:"#112648"},{key:2,label:"MCB",value:"MCB",color:"#687722"}],handleChange:this.handleBankNameChange,placeHolder:"Bank Name*",selectedValue:f,iconClass:"fa fa-university",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-hand-holding-usd inputIcon"}),i.a.createElement("input",{name:"branchName",value:g,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.branchName=t},required:!0,placeholder:"Branch Name",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-qrcode inputIcon"}),i.a.createElement("input",{name:"branchCode",value:E,onInput:this.handleInput,onChange:function(){},type:"number",ref:function(t){return e.branchCode=t},required:!0,placeholder:"Branch Code",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-book inputIcon"}),i.a.createElement("input",{name:"accountTitle",value:y,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.accountTitle=t},required:!0,placeholder:"A/C Title",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-portrait inputIcon"}),i.a.createElement("input",{name:"accountNumber",value:v,onInput:this.handleInput,onChange:function(){},type:"number",ref:function(t){return e.accountNumber=t},required:!0,placeholder:"A/C #",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2 "},i.a.createElement("i",{className:"fa fa-credit-card inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"ibanNumber",value:N,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.ibanNumber=t},required:!0,placeholder:"IBAN #",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2 "},i.a.createElement("i",{className:"fa fa-percentage inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"retailPricePercent",value:C,onInput:this.handleInput,onChange:function(){},pattern:"^[0-9]+(\\.[0-9][0-9]?)?",type:"number",ref:function(t){return e.retailPricePercent=t},onKeyPress:this.onKeyPress,placeholder:"Retail-Price %",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2 "},i.a.createElement("i",{className:"fa fa-percentage inputIcon",style:{paddingLeft:"11px"}}),i.a.createElement("input",{name:"costPricePercent",value:w,onInput:this.handleInput,onChange:function(){},pattern:"^[0-9]+(\\.[0-9][0-9]?)?",type:"number",ref:function(t){return e.costPricePercent=t},onKeyPress:this.onKeyPress,placeholder:"Cost-Price %",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center mb-0"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Update.."})))):null)))}}]),t}(s.Component),G=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"user"},i.a.createElement(Y,{allData:e}))}}]),t}(s.Component),Q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){a.setState({selectedPermissions:e})},a.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=a.refs.newRoleForm;if(!1!==t.checkValidity())if(a.state.selectedPermissions&&0!==a.state.selectedPermissions.length){var n=a.state,l=n.name,r=n.selectedPermissions,o={name:l.toLowerCase()},c={method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};fetch("/addNewRole",c).then((function(e){return e.json()})).then((function(e){if(e.success){var t=[],n=e.data.id;r.forEach((function(e){var a=e.value;t.push({role_id:n,permission_id:a})}));var l={RolePermissions:t},o={method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}};fetch("/addNewRolePermissions",o).then((function(e){return e.json()})).then((function(e){a.setState({name:"",selectedPermissions:[]}),window.location.reload()})).catch((function(e){return console.log(e)}))}else a.name.focus()})).catch((function(e){return console.log(e)}))}else a.setState({selectedPermissions:null});else t.classList.add("was-validated")},a._isMounted=!0,a.state={name:"",selectedPermissions:[],notificationMessage:"",notificationShow:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.selectedPermissions,l=this.props.allData,r=l.allPermissions&&l.allPermissions.map((function(e){return{key:e.id,label:e.slug,value:e.id,color:e.id%2===0?"#112648":"#687722"}}));return i.a.createElement(h,{I:"create",a:"role"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"newRoleForm",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-5 text-center"},"New Role"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("p",{style:{textAlign:"left"}}," ",i.a.createElement("small",{className:"pl-4 m-0 text-muted"},"*e.g. admin"))),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{options:r,handleChange:this.handleSelectChange,placeHolder:"Select Permissions..",selectedValue:n,iconClass:"fa fa-exclamation-circle",required:!0,isMulti:!0})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",name:"next",className:"next action-button",value:"Create.."})))))))}}]),t}(s.Component),J=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),null!==e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(h,{I:"create",a:"role"},i.a.createElement(Q,{allData:e}))}}]),t}(s.Component),K=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this)))._isMounted=!1,e.componentWillUnmount=function(){e._isMounted=!1},e.handleEdit=function(t){return function(a){e.props.history.push({pathname:"/users/roles/edit",search:"role=".concat(t)})}},e.redirectToNewEntityPath=function(){e.props.history.push("/users/roles/new")},e.handleDelete=function(t){return function(a){var n=a.target.closest("tr").rowIndex;e.setState({rowToBeDeleted:n,roleToBeDeleted:t}),e.refs.deleteModal.setState({modalShow:!0})}},e.deleteRole=function(){var t=e.state,a=t.rowToBeDeleted,n={value:t.roleToBeDeleted},l={method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/deleteRole",l).then((function(e){return e.json()})).then((function(e){e.success&&(document.getElementById("allRolesTable").deleteRow(a),fetch("/deleteAllRolePermissions",l).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)})))})).catch((function(e){return console.log(e)}))},e._isMounted=!0,e.state={rowToBeDeleted:"",roleToBeDeleted:""},e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.allData,a=[],n=0,l={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};t.allRoles&&t.allRoles.forEach((function(t){n+=1,a.push({index:n,name:t.name,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"role"},i.a.createElement(b.b,{style:l,color:"white",onClick:e.handleEdit(t.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"role"},i.a.createElement(b.b,{style:l,color:"white",onClick:e.handleDelete(t.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})}));var r={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"Action",field:"buttons"}],rows:a};return i.a.createElement(h,{I:"read",a:"role"},i.a.createElement(_,{cardHeading:"Users' Roles",permissionEntity:"role",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Role",tableId:"allRolesTable",data:r}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteRole}))}}]),t}(s.Component),$=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),null!==e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(h,{I:"read",a:"role"},i.a.createElement(K,this.props))}}]),t}(s.Component),X=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){a.setState({selectedPermissions:e})},a.handleSubmit=function(e){e.preventDefault(),e.stopPropagation();var t=a.refs.editRoleForm;if(!1!==t.checkValidity())if(a.state.selectedPermissions&&0!==a.state.selectedPermissions.length){var n=a.state.selectedPermissions,l={roleId:a.roleId},r={method:"DELETE",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}};fetch("/deleteAllRolePermissions",r).then((function(e){return e.json()})).then((function(e){if(e.success){var t=[],l=a.roleId;n.forEach((function(e){var a=e.value;t.push({role_id:l,permission_id:a})}));var r={RolePermissions:t},o={method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}};fetch("/addNewRolePermissions",o).then((function(e){return e.json()})).then((function(e){a.setState({name:"",selectedPermissions:[]}),window.location.reload()})).catch((function(e){return console.log(e)}))}else a.name.focus()})).catch((function(e){return console.log(e)}))}else a.setState({selectedPermissions:null});else t.classList.add("was-validated")},a._isMounted=!0;var l=new URLSearchParams(window.location.search),c=e.allData;a.roleId=Number(l.get("role"));var s=c.allRoles&&c.allRoles.filter((function(e){return e.id===a.roleId})).shift(),i=c.allRolePermissions&&c.allRolePermissions.filter((function(e){return e.role_id===a.roleId})),d=[];return i&&i.forEach((function(e){c.allPermissions&&c.allPermissions.forEach((function(t){t.id===e.permission_id&&d.push(t)}))})),a.state={name:s&&s.name,selectedPermissions:d.map((function(e){return{key:e.id,label:e.slug,value:e.id,color:e.id%2===0?"#112648":"#687722"}})),notificationMessage:"",notificationShow:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.selectedPermissions,l=this.props.allData,r=l.allPermissions&&l.allPermissions.map((function(e){return{key:e.id,label:e.slug,value:e.id,color:e.id%2===0?"#112648":"#687722"}}));return i.a.createElement(h,{I:"create",a:"role"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"editRoleForm",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-5 text-center"},"Edit Role"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,disabled:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{options:r,handleChange:this.handleSelectChange,placeHolder:"Select Permissions..",selectedValue:n,iconClass:"fa fa-exclamation-circle",required:!0,isMulti:!0})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",name:"next",className:"next action-button",value:"Update.."})))))))}}]),t}(s.Component),Z=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),null!==e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/home"}):i.a.createElement(h,{I:"update",a:"role"},i.a.createElement(X,{allData:e}))}}]),t}(s.Component),ee=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/users/roles/new",render:function(){return i.a.createElement(J,{allData:t})}}),i.a.createElement(m.b,{path:"/users/roles/all",render:function(e){return i.a.createElement($,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/users/roles/edit",render:function(){return i.a.createElement(Z,{allData:t})}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))},te=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/users/new",render:function(){return i.a.createElement(H,{allData:t})}}),i.a.createElement(m.b,{path:"/users/all",render:function(e){return i.a.createElement(z,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/users/edit",render:function(){return i.a.createElement(G,{allData:t})}}),i.a.createElement(m.b,{path:"/users/roles",render:function(){return i.a.createElement(ee,{allData:t})}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))},ae=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){return function(t){a.setState(Object(E.a)({},e,t))}},a.handleSubmit=function(e){var t=a.state,n=t.selectedBrand,l=t.selectedCategory,r=t.selectedVendor;e.preventDefault();var o=a.refs.newProductForm;if(n)if(l)if(r)if(!1!==o.checkValidity()){var c=a.state,s=c.name,i=c.sku,d=c.bktId,m={status:"pending",brandId:n.value,name:s,sku:i,bktId:d,categoryId:l.value,vendorId:r.value};console.log(m);var u={method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}};fetch("/addNewProduct",u).then((function(e){return e.json()})).then((function(e){console.log(e),e.success?a.setState({name:"",sku:"",bktId:"",retailPrice:"",costPrice:"",selectedBrand:"",selectedCategory:"",selectedVendor:""}):a.bktId.focus()})).catch((function(e){return console.log(e)}))}else o.classList.add("was-validated");else a.setState({selectedVendor:null});else a.setState({selectedCategory:null});else a.setState({selectedBrand:null})},a._isMounted=!0,a.state={name:"",sku:"",bktId:"",selectedBrand:"",selectedCategory:"",selectedVendor:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.sku,l=t.bktId,r=t.selectedBrand,o=t.selectedCategory,c=t.selectedVendor,s=this.props.allData,d=s.allBrands,m=s.allProductCategories,u=s.allUsers,p=s.allRoles,f=p&&p.filter((function(e){return"vendor"===e.name})).shift(),g=f&&f.id,E=u&&u.filter((function(e){return e.role_id===g}));return i.a.createElement(h,{I:"create",a:"product"},i.a.createElement(b.w,{center:!0,className:"mt-4 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"newProductForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",null,i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"New Prodcut"),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:d,handleChange:this.handleSelectChange("selectedBrand"),placeHolder:"Select Brand..*",selectedValue:r,iconClass:"fa fa-question-circle",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:m,handleChange:this.handleSelectChange("selectedCategory"),placeHolder:"Select Product-Category..*",selectedValue:o,iconClass:"fa fa-list-alt",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:E,handleChange:this.handleSelectChange("selectedVendor"),placeHolder:"Select Vendor..*",selectedValue:c,iconClass:"fa fa-user-tie",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-search-dollar inputIcon"}),i.a.createElement("input",{name:"sku",value:n,onInput:this.handleInput,onChange:function(){},type:"text",required:!0,ref:function(t){return e.sku=t},placeholder:"SKU*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-link inputIcon"}),i.a.createElement("input",{name:"bktId",value:l,onInput:this.handleInput,onChange:function(){},type:"text",required:!0,ref:function(t){return e.bktId=t},placeholder:"Product-ID from bucket.pk*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center mt-2"},i.a.createElement("input",{type:"submit",className:"mt-2 action-button",value:"Create.."})))))))}}]),t}(s.Component),ne=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"product"},i.a.createElement(ae,{allData:e}))}}]),t}(s.Component),le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){a.props.history.push({pathname:"/products/edit",search:"product=".concat(e)})}},a.redirectToNewEntityPath=function(){a.props.history.push("/products/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,productToBeDeleted:e}),a.refs.deleteModal.setState({modalShow:!0})}},a.deleteProduct=function(){var e=a.state,t=e.rowToBeDeleted,n={value:e.productToBeDeleted},l={method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/deleteProduct",l).then((function(e){return e.json()})).then((function(e){e.success&&document.getElementById("allProductsTable").deleteRow(t)})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={rowToBeDeleted:"",productToBeDeleted:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.allData,n=a.allBrands,l=a.allProductCategories,r=a.allProducts,o=a.allUsers,c=a.allRoles,s=[],d=0,m=c&&c.filter((function(e){return"vendor"===e.name})).shift(),u=m&&m.id,p=o&&o.filter((function(e){return e.role_id===u})),f={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};return r&&r.forEach((function(e){var a,r,o;d+=1,l&&l.forEach((function(t){t.id===e.product_category_id&&(a=t.name)})),n&&n.forEach((function(t){t.id===e.brand_id&&(r=t.name)})),p&&p.forEach((function(t){t.id===e.vendor_id&&(o=t.name)})),s.push({index:d,status:e.status,name:e.name,sku:e.sku,bktId:e.bkt_id,brand:r,category:a,vendor:o,retailPrice:e.retail_price,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"product"},i.a.createElement(b.b,{style:f,color:"white",onClick:t.handleEdit(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"product"},i.a.createElement(b.b,{style:f,color:"white",onClick:t.handleDelete(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})})),e={columns:[{label:"#",field:"index"},{label:"Status",field:"status"},{label:"Name",field:"name"},{label:"SKU",field:"sku"},{label:"Id. @ Bucket",field:"bktId"},{label:"Brand",field:"brand"},{label:"Product-Category",field:"category"},{label:"Vendor",field:"vendor"},{label:"Retail-Price",field:"retailPrice"},{label:"Action",field:"buttons"}],rows:s},i.a.createElement(h,{I:"read",a:"product"},i.a.createElement(_,{cardHeading:"Products",permissionEntity:"product",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Product",tableId:"allProductsTable",data:e}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteProduct}))}}]),t}(s.Component),re=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"product"},i.a.createElement(le,this.props))}}]),t}(s.Component),oe=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.editValidatingLabel(""),a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){return function(t){var n,l;"selectedVendor"===e?t?(a.refs.editProductLabel.innerHTML="",t.value!==a.state.selectedVendor.value?a.setState((n={},Object(E.a)(n,e,t),Object(E.a)(n,"costPrice",""),Object(E.a)(n,"retailPrice",""),n)):a.setState(Object(E.a)({},e,t))):a.setState((l={},Object(E.a)(l,e,t),Object(E.a)(l,"costPrice",""),Object(E.a)(l,"retailPrice",""),l)):a.setState(Object(E.a)({},e,t))}},a.onKeyPress=function(e){101!==e.which&&45!==e.which&&43!==e.which||e.preventDefault()},a.handleInputRetail=function(e){a.editValidatingLabel("");var t=a.state.selectedVendor,n=Number(e.target.value);if(a.setState({retailPrice:n}),t){if(!a.override.checked){var l=a.props.allData&&a.props.allData.allUsers.filter((function(e){return e.id===t.value})).shift();if(!l.retail_price_percent)return a.editValidatingLabel("retail-percent-price for this vendor has not been found."),void a.setState({retailPrice:"",costPrice:""});var r=n-Number(n)*Number(l.retail_price_percent)/100;r<n?a.setState({costPrice:r}):a.editValidatingLabel("you can't set retail-price less than cost-price.")}}else a.editValidatingLabel("Please select vendor first"),a.setState({retailPrice:"",costPrice:""})},a.handleInputCost=function(e){a.editValidatingLabel("");var t=a.state.selectedVendor,n=Number(e.target.value);if(a.setState({costPrice:n}),t){if(!a.override.checked){var l=a.props.allData&&a.props.allData.allUsers.filter((function(e){return e.id===t.value})).shift();if(!l.cost_price_percent)return a.editValidatingLabel("cost-percent-price for this vendor has not been found."),void a.setState({costPrice:"",retailPrice:""});var r=n+Number(n)*Number(l.cost_price_percent)/100;r>n?a.setState({retailPrice:r}):a.editValidatingLabel("you can't set cost-price more than retail-price.")}}else a.editValidatingLabel("Please select vendor first"),a.setState({costPrice:"",retailPrice:""})},a.handleBlurRetail=function(e){var t=Number(e.target.value),n=a.state.costPrice;a.override.checked&&(a.editValidatingLabel(t<n?"you can't set retail-price less than cost-price.":""),t<n&&a.costPrice.focus())},a.handleBlurCost=function(e){var t=Number(e.target.value),n=a.state.retailPrice;a.override.checked&&(a.editValidatingLabel(n<t?"you can't set cost-price more than retail-price.":""),n<t&&a.retailPrice.focus())},a.handleClickCheckbox=function(){a.editValidatingLabel(""),a.setState({retailPrice:"",costPrice:""})},a.editValidatingLabel=function(e){a.refs.editProductLabel.innerHTML=e},a.handleSubmit=function(e){var t=a.state,n=t.selectedStatus,l=t.selectedBrand,r=t.selectedCategory,o=t.selectedVendor,c=t.retailPrice,s=t.costPrice;e.preventDefault();var i=a.refs.editProductForm;if(n)if(l)if(r)if(o)if(!1!==i.checkValidity())if(s>c||s===c)a.refs.editProductLabel.innerHTML="It seems you entered retail-price less than or equal to cost-price but it can't, please change prices.";else{var d=a.state,m=d.name,u=d.sku,p=d.bktId,h={id:a.productId,status:n.value,brandId:l.value,name:m,sku:u,bktId:p,categoryId:r.value,retailPrice:c,costPrice:s,vendorId:o.value},f={method:"PUT",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}};fetch("/updateProduct",f).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e.success?(a.setState({name:"",sku:"",bktId:"",retailPrice:"",costPrice:"",selectedBrand:"",selectedCategory:"",selectedVendor:"",selectedStatus:""}),window.location.reload()):a.bktId.focus()})).catch((function(e){return console.log(e)}))}else i.classList.add("was-validated");else a.setState({selectedVendor:null});else a.setState({selectedCategory:null});else a.setState({selectedBrand:null});else a.setState({selectedStatus:null})},a._isMounted=!0;var l=new URLSearchParams(window.location.search),c=e.allData;a.productId=Number(l.get("product"));var s=e.allData.allProducts&&e.allData.allProducts.filter((function(e){return e.id===a.productId})).shift(),i=s&&c.allProductCategories&&c.allProductCategories.filter((function(e){return e.id===s.product_category_id})).shift(),d=s&&c.allBrands&&c.allBrands.filter((function(e){return e.id===s.brand_id})).shift(),m=s&&c.allUsers&&c.allUsers.filter((function(e){return e.id===s.vendor_id})).shift();return a.state={selectedStatus:s&&{key:Math.random(),label:s.status,value:s.status,color:"#687722"},selectedBrand:d&&{key:d.id,label:d.name,value:d.id,color:d.id%2===0?"#112648":"#687722"},selectedCategory:i&&{key:i.id,label:i.name,value:i.id,color:i.id%2===0?"#112648":"#687722"},selectedVendor:m&&{key:m.id,label:m.name,value:m.id,color:m.id%2===0?"#112648":"#687722"},name:s&&s.name,sku:s&&s.sku,bktId:s&&s.bkt_id,retailPrice:s&&s.retail_price?s.retail_price:"",costPrice:s&&s.cost_price?s.cost_price:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.sku,l=t.bktId,r=t.selectedBrand,o=t.selectedCategory,c=t.selectedVendor,s=t.costPrice,d=t.retailPrice,m=t.selectedStatus,u=this.props.allData,p=u.allBrands,f=u.allProductCategories,g=u.allUsers,E=u.allRoles,v=E&&E.filter((function(e){return"vendor"===e.name})).shift().id,y=g&&g.filter((function(e){return e.role_id===v}));return i.a.createElement(h,{I:"update",a:"product"},i.a.createElement(b.w,{center:!0,className:"mt-4 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"editProductForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"pb-1"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"Edit Prodcut"),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{options:[{key:1,label:"Pending",value:"Pending",color:"#112648"},{key:2,label:"Published",value:"Published",color:"#687722"}],handleChange:this.handleSelectChange("selectedStatus"),placeHolder:"Status..*",selectedValue:m,iconClass:"fa fa-star-half-alt",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:p,handleChange:this.handleSelectChange("selectedBrand"),placeHolder:"Select Brand..*",selectedValue:r,iconClass:"fa fa-question-circle",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:f,handleChange:this.handleSelectChange("selectedCategory"),placeHolder:"Select Product-Category..*",selectedValue:o,iconClass:"fa fa-list-alt",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:y,handleChange:this.handleSelectChange("selectedVendor"),placeHolder:"Select Vendor..*",selectedValue:c,iconClass:"fa fa-user-tie",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-search-dollar inputIcon"}),i.a.createElement("input",{name:"sku",value:n,onInput:this.handleInput,onChange:function(){},type:"text",required:!0,ref:function(t){return e.sku=t},placeholder:"SKU*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-link inputIcon"}),i.a.createElement("input",{name:"bktId",value:l,onInput:this.handleInput,onChange:function(){},type:"text",required:!0,ref:function(t){return e.bktId=t},placeholder:"Product-ID from bucket.pk*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(b.w,null,i.a.createElement(b.g,{className:"pr-1"},i.a.createElement("i",{className:"fa fa-dollar-sign inputIcon"}),i.a.createElement("input",{name:"retailPrice",value:d,onInput:this.handleInputRetail,onChange:function(){},pattern:"^[0-9]+(\\.[0-9][0-9]?)?",onKeyPress:this.onKeyPress,onBlur:this.handleBlurRetail,type:"number",ref:function(t){return e.retailPrice=t},required:!0,placeholder:"Retail-Price*",className:"fontRaleway inputText pl-5 pr-0 form-control"})),i.a.createElement(b.g,{className:"pl-1"},i.a.createElement("i",{className:"fa fa-dollar-sign inputIcon"}),i.a.createElement("input",{name:"costPrice",value:s,onInput:this.handleInputCost,onChange:function(){},type:"number",ref:function(t){return e.costPrice=t},pattern:"^[0-9]+(\\.[0-9][0-9]?)?",required:!0,onBlur:this.handleBlurCost,onKeyPress:this.onKeyPress,placeholder:"Cost-Price*",className:"fontRaleway inputText pl-5 pr-0 form-control"})))),i.a.createElement("div",{className:"m-0 text-left"},i.a.createElement("input",{id:"override",type:"checkbox",ref:function(t){return e.override=t},onClick:this.handleClickCheckbox,className:"fontRaleway text-left align-middle ml-2"}),i.a.createElement("small",{className:"ml-2 colorBlue fontRaleway align-middle"},"Override prices")),i.a.createElement("div",{className:"text-center mt-1 mb-0 pb-0"},i.a.createElement("label",{ref:"editProductLabel",className:"m-0 p-0 validatingLabel"}),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",className:" mt-2 action-button mb-1",value:"Update.."})))))))}}]),t}(s.Component),ce=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"product"},i.a.createElement(oe,{allData:e}))}}]),t}(s.Component),se=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.refs.newProductCategoryForm;if(!1!==t.checkValidity()){var n=a.state,l={name:n.name,description:n.description},r={method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}};fetch("/addNewProductCategory",r).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e.success?a.setState({name:"",description:""}):a.name.focus()})).catch((function(e){return console.log(e)}))}else t.classList.add("was-validated")},a._isMounted=!0,a.state={name:"",description:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description;return i.a.createElement(h,{I:"create",a:"productCategory"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"newProductCategoryForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"New Product-Category"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-info-circle inputIcon"}),i.a.createElement("textarea",{name:"description",value:n,onInput:this.handleInput,onChange:function(){},type:"textarea",ref:function(t){return e.description=t},rows:"3",placeholder:"Description",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Create.."})))))))}}]),t}(s.Component),ie=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"productCategory"},i.a.createElement(se,null))}}]),t}(s.Component),de=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){a.props.history.push({pathname:"/products/categories/edit",search:"category=".concat(e)})}},a.redirectToNewEntityPath=function(){a.props.history.push("/products/categories/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,categoryToBeDeleted:e}),a.refs.deleteModal.setState({modalShow:!0})}},a.deleteProductCategory=function(){var e=a.state,t=e.rowToBeDeleted,n={value:e.categoryToBeDeleted},l={method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/deleteProductCategory",l).then((function(e){return e.json()})).then((function(e){e.success&&document.getElementById("allProductCategoriesTable").deleteRow(t)})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={allProductCategories:e.allData.allProductCategories,rowToBeDeleted:"",categoryToBeDeleted:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.allProductCategories,a=[],n=0,l={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};t&&t.forEach((function(t){n+=1,a.push({index:n,name:t.name,description:t.description,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"productCategory"},i.a.createElement(b.b,{style:l,color:"white",onClick:e.handleEdit(t.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"productCategory"},i.a.createElement(b.b,{style:l,color:"white",onClick:e.handleDelete(t.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})}));var r={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"Description",field:"description"},{label:"Action",field:"buttons"}],rows:a};return i.a.createElement(h,{I:"read",a:"productCategory"},i.a.createElement(_,{cardHeading:"Product-Categories",permissionEntity:"productCategory",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Category",tableId:"allProductCategoriesTable",data:r}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteProductCategory}))}}]),t}(s.Component),me=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"productCategory"}," ",i.a.createElement(de,this.props))}}]),t}(s.Component),ue=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.refs.editProductCategoryForm;if(!1!==t.checkValidity()){var n=a.state,l=n.name,r=n.description,o={id:a.categoryId,name:l,description:r},c={method:"PUT",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};fetch("/updateProductCategory",c).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e.success?(a.setState({name:"",description:""}),window.location.reload()):a.name.focus()})).catch((function(e){return console.log(e)}))}else t.classList.add("was-validated")},a._isMounted=!0;var l=new URLSearchParams(window.location.search);a.categoryId=Number(l.get("category"));var c=e.allData.allProductCategories&&e.allData.allProductCategories.filter((function(e){return e.id===a.categoryId})).shift();return a.state={name:c&&c.name,description:c&&c.description},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description;return i.a.createElement(h,{I:"update",a:"productCategory"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"editProductCategoryForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"Edit Product-Category"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-info-circle inputIcon"}),i.a.createElement("textarea",{name:"description",value:n,onInput:this.handleInput,onChange:function(){},type:"textarea",ref:function(t){return e.description=t},rows:"3",placeholder:"Description",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Update.."})))))))}}]),t}(s.Component),pe=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"productCategory"},i.a.createElement(ue,{allData:e}))}}]),t}(s.Component),he=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/products/categories/new",render:function(){return i.a.createElement(ie,null)}}),i.a.createElement(m.b,{path:"/products/categories/all",render:function(e){return i.a.createElement(me,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/products/categories/edit",render:function(){return i.a.createElement(pe,{allData:t})}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))},fe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.refs.newBrandForm;if(!1!==t.checkValidity()){var n=a.state,l={name:n.name,description:n.description},r={method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}};fetch("/addNewBrand",r).then((function(e){return e.json()})).then((function(e){console.log(e),e.success?a.setState({name:"",description:""}):a.name.focus()})).catch((function(e){return console.log(e)}))}else t.classList.add("was-validated")},a._isMounted=!0,a.state={name:"",description:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description;return i.a.createElement(h,{I:"create",a:"brand"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"newBrandForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"New Brand"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-info-circle inputIcon"}),i.a.createElement("textarea",{name:"description",value:n,onInput:this.handleInput,onChange:function(){},type:"textarea",ref:function(t){return e.description=t},rows:"3",placeholder:"Description",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Create.."})))))))}}]),t}(s.Component),be=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"brand"},i.a.createElement(fe,null))}}]),t}(s.Component),ge=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){a.props.history.push({pathname:"/products/brands/edit",search:"brand=".concat(e)})}},a.redirectToNewEntityPath=function(){a.props.history.push("/products/brands/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,brandToBeDeleted:e}),a.refs.deleteModal.setState({modalShow:!0})}},a.deleteBrand=function(){var e=a.state,t=e.rowToBeDeleted,n={value:e.brandToBeDeleted},l={method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/deleteBrand",l).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&document.getElementById("allBrandsTable").deleteRow(t)})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={allBrands:e.allData.allBrands,rowToBeDeleted:"",brandToBeDeleted:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.allBrands,a=[],n=0,l={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};t&&t.forEach((function(t){n+=1,a.push({index:n,name:t.name,description:t.description,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"brand"},i.a.createElement(b.b,{style:l,color:"white",onClick:e.handleEdit(t.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"brand"},i.a.createElement(b.b,{style:l,color:"white",onClick:e.handleDelete(t.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})}));var r={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"Description",field:"description"},{label:"Action",field:"buttons"}],rows:a};return i.a.createElement(h,{I:"read",a:"brand"},i.a.createElement(_,{cardHeading:"Brands",permissionEntity:"brand",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Brand",tableId:"allBrandsTable",data:r}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteBrand}))}}]),t}(s.Component),Ee=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"brand"}," ",i.a.createElement(ge,this.props))}}]),t}(s.Component),ve=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t=a.refs.editBrandForm;if(!1!==t.checkValidity()){var n=a.state,l=n.name,r=n.description,o={id:a.brandId,name:l,description:r},c={method:"PUT",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}};fetch("/updateBrand",c).then((function(e){return e.json()})).then((function(e){console.log(e),!0===e.success?(a.setState({name:"",description:""}),window.location.reload()):a.name.focus()})).catch((function(e){return console.log(e)}))}else t.classList.add("was-validated")},a._isMounted=!0;var l=new URLSearchParams(window.location.search);a.brandId=Number(l.get("brand"));var c=e.allData.allBrands&&e.allData.allBrands.filter((function(e){return e.id===a.brandId})).shift();return a.state={name:c&&c.name,description:c&&c.description},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.description;return i.a.createElement(h,{I:"update",a:"brand"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"editBrandForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"Edit Brand"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-info-circle inputIcon"}),i.a.createElement("textarea",{name:"description",value:n,onInput:this.handleInput,onChange:function(){},type:"textarea",ref:function(t){return e.description=t},rows:"3",placeholder:"Description",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Update.."})))))))}}]),t}(s.Component),ye=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"brand"},i.a.createElement(ve,{allData:e}))}}]),t}(s.Component),Ne=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/products/brands/new",render:function(){return i.a.createElement(be,null)}}),i.a.createElement(m.b,{path:"/products/brands/all",render:function(e){return i.a.createElement(Ee,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/products/brands/edit",render:function(){return i.a.createElement(ye,{allData:t})}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))},Ie=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/products/new",render:function(){return i.a.createElement(ne,{allData:t})}}),i.a.createElement(m.b,{path:"/products/all",render:function(e){return i.a.createElement(re,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/products/edit",render:function(){return i.a.createElement(ce,{allData:t})}}),i.a.createElement(m.b,{path:"/products/categories",render:function(){return i.a.createElement(he,{allData:t})}}),i.a.createElement(m.b,{path:"/products/brands",render:function(){return i.a.createElement(Ne,{allData:t})}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))},we=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.redirectToNewEntityPath=function(){a.props.history.push("/inventories/update")},a._isMounted=!0,a.state={allInventories:e.allData.allInventories,allProducts:e.allData.allProducts,allProductCategories:e.allData.allProductCategories,allBrands:e.allData.allBrands},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.allInventories,n=t.allBrands,l=t.allProductCategories,r=t.allProducts,o=[],c=0;return a&&a.forEach((function(e){var t,a,s;c+=1,r&&r.forEach((function(t){t.id===e.bkt_id&&(s=t.name)})),l&&l.forEach((function(e){s?e.id===s.id&&(t=e.name):t="Product not found."})),n&&n.forEach((function(e){s?e.id===s.brand_id&&(a=e.name):a="Product not found."})),o.push({index:c,name:s?s.name:"Product not created yet.",bktId:e.bkt_id?e.bkt_id:"Product not found.",sku:s?s.sku:"Product not created yet.",category:s?t:"Product not created yet.",brand:s?a:"Product not created yet.",qty:e.qty})})),e={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"bucket-ID",field:"bktId"},{label:"SKU",field:"sku"},{label:"Category",field:"category"},{label:"Brand",field:"brand"},{label:"QTY.",field:"qty",attributes:{fontWeight:"bold"}}],rows:o},i.a.createElement(h,{I:"read",a:"inventories"},i.a.createElement(_,{cardHeading:"Inventories",permissionEntity:"inventories",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Inventory",tableId:"allInventoriesTable",data:e}))}}]),t}(s.Component),Ce=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"inventories"},i.a.createElement(we,this.props))}}]),t}(s.Component),xe=function(e){var t,a=e.allData,n=a.allInventoryHistories,l=a.allProducts,r=a.allUsers,o=a.allRoles,c=[],s=0,d=o&&o.filter((function(e){return"vendor"===e.name})).shift().id,m=r&&r.filter((function(e){return e.role_id===d}));return n&&n.forEach((function(e){var t,a;s+=1,l&&l.forEach((function(t){t.bkt_id===e.bkt_id&&(a=t)})),m&&m.forEach((function(a){a.id===e.vendor_id&&(t=a)})),c.push({index:s,name:a?a.name:e.bkt_id,bktId:e.bkt_id,option:e.option,qty:e.qty,vendor:t.name})})),t={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"bucket-ID",field:"bktId"},{label:"Update-Option",field:"option"},{label:"QTY.",field:"qty",attributes:{fontWeight:"bold"}},{label:"Vendor",field:"vendor"}],rows:c},i.a.createElement(h,{I:"read",a:"inventoryHistories"},i.a.createElement(_,{cardHeading:"inventory Histories",permissionEntity:"inventoryHistories",redirectToNewEntityPath:null,addButtonEntityLabel:"inventory History",tableId:"allinventoryHistoriesTable",data:t}))},Oe=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"inventoryHistories"}," ",i.a.createElement(xe,this.props))}}]),t}(s.Component),ke=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSelectChange=function(e){return function(t){a.setState(Object(E.a)({},e,t))}},a.onKeyPress=function(e){101!==e.which&&45!==e.which&&43!==e.which||e.preventDefault()},a.handleSubmit=function(e){var t=a.state,n=t.selectedUpdateOption,l=t.selectedVendor;e.preventDefault();var r=a.refs.updateInventoriesForm;if(!1!==r.checkValidity())if(n)if(l){var o=a.state,c={bktId:o.bktId,qty:o.qty,updateOption:n.value},s={method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}};fetch("/manualUpdateInventories",s).then((function(e){return e.json()})).then((function(e){if(e.success){a.setState({selectedUpdateOption:"",selectedVendor:"",bktId:"",qty:""});var t=c;t.vendor=l?l.value:l;var n={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};fetch("/addNewInventoryHistory",n).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)}))}else a.bktId.focus()})).catch((function(e){return console.log(e)}))}else a.setState({selectedVendor:null});else a.setState({selectedUpdateOption:null});else r.classList.add("was-validated")},a._isMounted=!0,a.state={selectedUpdateOption:"",selectedVendor:"",bktId:"",qty:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedUpdateOption,n=t.selectedVendor,l=t.bktId,r=t.qty,o=this.props.allData,c=o.allUsers,s=o.allRoles,d=s&&s.filter((function(e){return"vendor"===e.name})).shift(),m=d&&d.id,u=c&&c.filter((function(e){return e.role_id===m})),p=[{key:Math.random(),label:"Create",value:"create",color:"#112648"},{key:Math.random(),label:"Return",value:"return",color:"#687722"},{key:Math.random(),label:"Delete",value:"delete",color:"#112648"}];return i.a.createElement(h,{I:"create",a:"product"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"updateInventoriesForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},"Update Your Inventory"),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{options:p,handleChange:this.handleSelectChange("selectedUpdateOption"),placeHolder:"Select an update option..*",selectedValue:a,iconClass:"fa fa-question-circle",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement(k,{Entities:u,handleChange:this.handleSelectChange("selectedVendor"),placeHolder:"Select Vendor..*",selectedValue:n,iconClass:"fa fa-list-alt",required:!0,isMulti:!1})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"bktId",value:l,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.bktId=t},required:!0,placeholder:"Product's bucket-ID*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-info-circle inputIcon"}),i.a.createElement("input",{name:"qty",value:r,onInput:this.handleInput,onChange:function(){},type:"number",onKeyPress:this.onKeyPress,ref:function(t){return e.qty=t},required:!0,placeholder:"Qty.*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"text-center"},i.a.createElement("input",{type:"submit",className:"next action-button",value:"Update.."})))))))}}]),t}(s.Component),Te=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"inventories"},i.a.createElement(ke,{allData:this.props.allData})))}}]),t}(s.Component),Se=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/inventories/update",render:function(){return i.a.createElement(Te,{allData:t})}}),i.a.createElement(m.b,{path:"/inventories/all",render:function(e){return i.a.createElement(Ce,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/inventories/history",render:function(){return i.a.createElement(Oe,{allData:t})}}))},je=a(78),De=a.n(je),Pe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).toggle=function(){a.setState({modalShow:!a.state.modalShow})},a.sendResponseBack=function(e){return function(t){var n=a.state.option;e?(a.props.positiveBtnClicked(n),a.toggle()):(a.props.negativeBtnClicked(n),a.toggle())}},a.state={modalShow:!1,option:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.positiveBtnTxt,a=e.negativeBtnTxt,n=e.message,l=e.heading;return i.a.createElement(b.i,null,i.a.createElement(b.m,{modalStyle:"info",style:{borderRadius:"10px"},className:"text-white",size:"md",centered:!0,backdrop:!0,isOpen:this.state.modalShow,toggle:this.toggle},i.a.createElement(b.p,{className:"text-center questionModalHeader",titleClass:"w-100",tag:"p",toggle:this.toggle},i.a.createElement("b",{style:{letterSpacing:"0.2vw"}},l),i.a.createElement("br",null),n,"."),i.a.createElement(b.n,{className:"text-center"},i.a.createElement(b.k,{icon:"question",size:"6x",className:"animated rotateIn colorGreen"})),i.a.createElement(b.o,{className:"justify-content-center"},i.a.createElement(b.w,{center:!0,className:"w-100"},i.a.createElement(b.g,{className:"text-center",size:"4"},i.a.createElement("button",{type:"button",className:"questionModalBtn w-100 px-0",onClick:this.sendResponseBack(!0)},t)),i.a.createElement(b.g,{className:"text-center",size:"4"},i.a.createElement("button",{type:"button",className:"questionModalBtn w-100 px-0",onClick:this.sendResponseBack(!1)},a))))))}}]),t}(s.Component),Re=[{value:"Website",label:"Website",key:1,color:"#112648"},{value:"facebook",label:"Facebook",key:2,color:"#687722"},{value:"WhatsApp",label:"WhatsApp",key:3,color:"#112648"},{value:"Phone",label:"Phone",key:4,color:"#687722"}],Be=[{value:"Waiting vendor confirmation",label:"Waiting vendor confirmation",key:1,color:"#112648"},{value:"Waiting customer confirmation",label:"Waiting customer confirmation",key:2,color:"#687722"},{value:"On-hold",label:"On-hold",key:3,color:"#112648"},{value:"Cancelled",label:"Cancelled",key:4,color:"red"},{value:"Confirmed",label:"Confirmed",key:5,color:"#112648"},{value:"Requested",label:"Requested",key:6,color:"#687722"},{value:"Awaiting dispatch",label:"Awaiting dispatch",key:7,color:"#112648"},{value:"Awaiting pickup",label:"Awaiting pickup",key:8,color:"#687722"},{value:"Rider notified",label:"Rider notified",key:9,color:"#112648"},{value:"Packing in process",label:"Packing in process",key:10,color:"#687722"},{value:"RTS",label:"RTS",key:11,color:"#112648"},{value:"Shipped",label:"Shipped",key:12,color:"#687722"},{value:"Delivered",label:"Delivered",key:13,color:"#112648"},{value:"Refused",label:"Refused",key:14,color:"red"}],_e=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleDateChange=function(e){a.setState({orderDate:e})},a.handleSelectChange=function(e){return function(t){var n,l,r,o,c=a.props.orderState;if("orderStatus"===e&&"edit"===c)switch(t.label){case"Waiting customer confirmation":n="Are You Confirm that?",l="Goods Demanded By Customer are Available",r="Yes",o="No",a.setQuestionModalProps(n,l,r,o,t);break;case"On-hold":n="Are You Confirm that?",l="Customer Put the Order On-Hold",r="Yes",o="No",a.setQuestionModalProps(n,l,r,o,t);break;case"Cancelled":n="Are You Confirm that?",l="Customer Cancelled the Order",r="Yes",o="No",a.setQuestionModalProps(n,l,r,o,t);break;case"Confirmed":n="Are You Confirm that?",l="Customer Confirmed the Order",r="Yes",o="No",a.setQuestionModalProps(n,l,r,o,t);break;case"Requested":n="Did You Call Vendor?",l="to process the Order",r="Yes",o="No",a.setQuestionModalProps(n,l,r,o,t);break;case"Awaiting dispatch":n="Did You Receive Call from Vendor?",l="that Parcel is ready to dispatch",r="Yes",o="No",a.setQuestionModalProps(n,l,r,o,t)}else a.setState(Object(E.a)({},e,t))}},a.handleChangingStatus=function(e){a.setState({orderStatus:e})},a.setQuestionModalProps=function(e,t,n,l,r){a.setState({questionHeading:e,questionMessage:t,positiveBtnTxt:n,negativeBtnTxt:l}),a.refs.questionModal.setState({modalShow:!0,option:r})},a.questionModalPositiveBtnClicked=function(e){e?a.handleChangingStatus(e):a.setState({courier:"M&P",orderTracking:""},(function(){a.exportCSV("M&P")}))},a.questionModalNegativeBtnClicked=function(e){e||a.setState({courier:"TCS",orderTracking:""},(function(){a.exportCSV("TCS")}))},a.chooseCourier=function(){var e=a.state,t=e.orderStatus,n=e.courier;if("Awaiting dispatch"===t.label)if(n){if(window.confirm("Do you want to export CSV file for this order again ?\nIf you choose 'OK' Tracking # for this order will be cleared.")){var l=i.a.createElement("img",{className:"w-100 h-100",alt:"M&P",src:"/images/m&p.png"}),r=i.a.createElement("img",{className:"w-100 h-100",alt:"TCS",src:"/images/tcs.png"});a.setQuestionModalProps("Which Company?","Do You Want to Use to Ship Parcel",l,r,"")}}else{var o=i.a.createElement("img",{className:"w-100 h-100",alt:"M&P",src:"/images/m&p.png"}),c=i.a.createElement("img",{className:"w-100 h-100",alt:"TCS",src:"/images/tcs.png"});a.setQuestionModalProps("Which Company?","Do You Want to Use to Ship Parcel",o,c,"")}},a.exportCSV=function(e){var t=a.props,n=t.orderBeingEdited,l=t.orderDetailsBeingEdited;console.log(n),console.log(l),"TCS"===e&&[].push({})},a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.checkValidity=function(){var e=a.orderDetailsForm,t=a.state,n=t.orderSource,l=t.orderStatus;return!1===e.checkValidity()?(e.classList.add("was-validated"),!1):n?!!l||(a.setState({orderStatus:null}),!1):(a.setState({orderSource:null}),!1)},a.makeFormEmpty=function(){a.setState({orderId:"",orderDate:"",orderSource:"",orderStatus:{value:"Pending confirmation",label:"Pending confirmation",key:1,color:"#112648"},orderTracking:"",orderNote:""})},a.orderId="",a.state={orderId:"",orderDate:"",orderSource:"",orderStatus:{value:"Waiting vendor confirmation",label:"Waiting vendor confirmation",key:1,color:"#112648"},courier:"",orderTracking:"",orderNote:"",questionHeading:"",questionMessage:"",positiveBtnTxt:"",negativeBtnTxt:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.orderId,n=t.orderSource,l=t.orderStatus,r=t.orderDate,o=t.courier,c=t.orderTracking,s=t.orderNote,d=t.questionMessage,m=t.positiveBtnTxt,u=t.negativeBtnTxt,p=t.questionHeading,h=this.props.orderState;return i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{className:"m-0 p-0"},i.a.createElement("form",{className:"m-0 p-0 orderDetailsForm",ref:function(t){return e.orderDetailsForm=t},noValidate:!0},i.a.createElement("fieldset",{className:"borderBlue py-0 px-3 w-100"},i.a.createElement("legend",{className:"legend-border"}," Order:"),i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{className:"m-0"},i.a.createElement(b.w,{center:!0,className:"m-0 p-0"},i.a.createElement(b.g,{xl:"2",lg:"2",md:"2",sm:"6",className:"m-0",middle:!0},i.a.createElement(b.l,{name:"orderId",onInput:this.handleInput,className:"m-0",value:a,label:"Id",outline:!0,required:!0,disabled:"edit"===h&&!0})),i.a.createElement(b.g,{xl:"2",lg:"2",md:"3",sm:"6",className:"my-2",middle:!0},i.a.createElement(De.a,{id:"datePicker",selected:r,placeholderText:"Date",onChange:this.handleDateChange,className:"form-control",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",dateFormat:"dd/MM/yy",autoComplete:"off",required:!0})),i.a.createElement(b.g,{xl:"4",lg:"4",md:"3",sm:"6",className:"my-2",middle:!0},i.a.createElement(k,{options:Re,handleChange:this.handleSelectChange("orderSource"),placeHolder:"Source..*",selectedValue:n,required:!0,withOutIcon:!0,isMulti:!1})),"edit"===h?i.a.createElement(i.a.Fragment,null,i.a.createElement(b.g,{xl:"4",lg:"4",md:"4",sm:"6",className:"my-2",middle:!0},i.a.createElement(k,{options:Be,handleChange:this.handleSelectChange("orderStatus"),placeHolder:"Status..*",selectedValue:l,required:!0,withOutIcon:!0,isMulti:!1})),i.a.createElement(b.g,{md:"4",className:"m-0",sm:"6",middle:!0},i.a.createElement(b.l,{label:"Tracking Id",name:"orderTracking",onInput:this.handleInput,hint:o,value:c,outline:!0,className:"m-0"}))):null,i.a.createElement(b.g,{md:"edit"===h?"Awaiting dispatch"===l.label?"6":"8":"4",sm:"edit"===h&&"Awaiting dispatch"===l.label?"3":"6",className:"m-0",middle:!0},i.a.createElement(b.l,{type:"textarea",rows:"1",label:"Note",name:"orderNote",onInput:this.handleInput,value:s,outline:!0,className:"m-0",style:{borderRadius:"4px"}})),"edit"===h&&"Awaiting dispatch"===l.label?i.a.createElement(b.g,{md:"2",sm:"3",className:"m-0",middle:!0},i.a.createElement("button",{style:{fontSize:"17px",borderRadius:"4px"},type:"button",onClick:this.chooseCourier,className:"btn py-1 px-2 w-100 mx-0 mt-0 mb-1 font-weight-bold text-white backGround-blue borderBlue fontRaleway"},"Export CSV")):null,i.a.createElement(Pe,{ref:"questionModal",heading:p,message:d,positiveBtnClicked:this.questionModalPositiveBtnClicked,negativeBtnClicked:this.questionModalNegativeBtnClicked,positiveBtnTxt:m,negativeBtnTxt:u}))))))))}}]),t}(s.Component),Le=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.checkValidity=function(){var e=a.orderCustomerDetailsForm;return!1!==e.checkValidity()||(e.classList.add("was-validated"),!1)},a.makeFormEmpty=function(){a.setState({cName:"",cContact:"",cAddress:""})},a.orderId="",a.state={cName:"",cContact:"",cAddress:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.cName,n=t.cContact,l=t.cAddress;return i.a.createElement(b.w,{className:"my-3 mx-0 p-0"},i.a.createElement(b.g,{className:"m-0 p-0"},i.a.createElement("form",{className:"m-0 p-0 orderCustomerDetailsForm",ref:function(t){return e.orderCustomerDetailsForm=t},noValidate:!0},i.a.createElement("fieldset",{className:"borderBlue py-0 px-3 w-100"},i.a.createElement("legend",{className:"legend-border"},"Customer:"),i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:a,className:"my-0",style:{marginRight:"4px"},label:"Name",name:"cName",onInput:this.handleInput,required:!0,validate:!0,outline:!0})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:n,className:"my-0",style:{marginRight:"4px"},label:"Contact",name:"cContact",onInput:this.handleInput,required:!0,validate:!0,outline:!0})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:l,className:"my-0",type:"textarea",rows:"1",style:{marginRight:"4px"},label:"Address",name:"cAddress",onInput:this.handleInput,required:!0,validate:!0,outline:!0})))))))}}]),t}(s.Component),Me=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).handleSelectChange=function(e){return function(t){a.setState(Object(E.a)({},e,t))}},a.onKeyPress=function(e){101!==e.which&&45!==e.which&&43!==e.which||e.preventDefault()},a.handleInput=function(e){a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleAddProduct=function(e){e.preventDefault();var t=a.orderProductDetailsForm;if(!1!==t.checkValidity())if(a.state.selectedProduct){var n=a.state,l=n.selectedProduct,r=n.pQTY,o=n.pRemarks,c=n.pDiscount,s=l.value,i=l.sku,d=l.retailPrice,m=l.costPrice,u=parseFloat(a.pPrice.value).toFixed(2),p=!!a.checkbox.checked;a.props.addProductToTbl(s,i,d,r,c,u,o,p,m),a.setState({selectedProduct:"",pQTY:1,pRemarks:"",pDiscount:0}),t.classList.remove("was-validated"),a.checkbox.checked=!1}else a.setState({selectedProduct:null});else t.classList.add("was-validated")},a.orderId="",a.state={selectedProduct:"",pQTY:1,pRemarks:"",pDiscount:0,displayForm:"edit"!==e.orderState},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedProduct,n=t.pQTY,l=t.pRemarks,r=t.pDiscount,o=t.displayForm,c=this.props.allData.allProducts,s=c&&c.map((function(e){return{key:e.id,label:e.name,value:e.id,retailPrice:e.retail_price,costPrice:e.cost_price,sku:e.sku,color:e.id%2===0?"#112648":"#687722"}}));return i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{className:"m-0 p-0"},o?i.a.createElement("form",{className:"m-0 p-0 orderProductDetailsForm",ref:function(t){return e.orderProductDetailsForm=t},onSubmit:this.handleAddProduct,noValidate:!0},i.a.createElement("fieldset",{className:"borderBlue pt-0 pb-2 px-3 w-100"},i.a.createElement("legend",{className:"legend-border"},"Product:"),i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{xl:"3",lg:"3",md:"3",sm:"6",className:"my-2",middle:!0},i.a.createElement(k,{options:s,handleChange:this.handleSelectChange("selectedProduct"),placeHolder:"Product..*",selectedValue:a,required:!0,withOutIcon:!0,isMulti:!1})),i.a.createElement(b.g,{xl:"2",lg:"2",md:"2",sm:"6",className:"m-0"},i.a.createElement(b.l,{value:n,label:"Qty",name:"pQTY",onKeyPress:this.onKeyPress,onInput:this.handleInput,required:!0,pattern:"^[1-9]\\d*|(^[0-9]\\d*[.]?)+[1-9]+",outline:!0,className:"my-0"})),i.a.createElement(b.g,{xl:"2",lg:"2",md:"2",sm:"6",className:"m-0"},i.a.createElement(b.l,{value:r,type:"number",label:"Discount(%)",name:"pDiscount",onKeyPress:this.onKeyPress,onInput:this.handleInput,inputRef:function(t){e.pDiscount=t},outline:!0,className:"my-0",max:a?(a.retailPrice-a.costPrice)/a.retailPrice*100-1:0})),i.a.createElement(b.g,{xl:"2",lg:"2",md:"2",sm:"6",className:"m-0"},i.a.createElement(b.l,{value:a?(a.retailPrice*n-a.retailPrice*n*r/100).toFixed(2):0,type:"number",label:"Price",inputRef:function(t){e.pPrice=t},disabled:!0,outline:!0,className:"my-0"})),i.a.createElement(b.g,{xl:"3",lg:"3",md:"3",sm:"6",className:"m-0"},i.a.createElement(b.l,{value:l,type:"textarea",rows:"1",label:"Remarks",name:"pRemarks",onInput:this.handleInput,outline:!0,className:"my-0",style:{borderRadius:"4px"}}))),i.a.createElement(b.w,{className:"m-0 p-0",end:!0},i.a.createElement(b.g,{xl:"3",lg:"3",md:"4",sm:"5",className:"m-0 p-0 text-center",middle:!0},i.a.createElement("div",{className:"form-check"},i.a.createElement("input",{className:"align-middle",type:"checkbox",ref:function(t){e.checkbox=t}}),i.a.createElement("label",{className:"ml-2 colorBlue"},"Is extra added?"))),i.a.createElement(b.g,{xl:"3",lg:"4",md:"5",sm:"6",className:"m-0 text-center",middle:!0},i.a.createElement("div",{className:"text-center m-0"},i.a.createElement("input",{type:"submit",style:{width:"80%"},className:" action-button",value:"Sale Product"})))))):null))}}]),t}(s.Component),Ve=a(36),Ae=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).mouseEntered=function(){a.inputEditQty.style.backgroundColor="#f2f2f2",a.inputEditDiscount.style.backgroundColor="#f2f2f2"},a.mouseLeft=function(){a.inputEditQty.style.backgroundColor="white",a.inputEditDiscount.style.backgroundColor="white"},a.handleInputQty=function(e){var t,n=a.state,l=n.pPrice,r=n.pChecked,o=n.pDiscount,c=n.pRate,s=a.props.pCost,i=e.target.value;a.setState({pQTY:i}),(t=i>0?parseFloat(c*i-c*i*o/100).toFixed(2):0)>(i*s).toFixed(2)&&(a.props.minusFromTotal(l),r&&a.props.minusFromTotalValueAdded(l),a.setState({pPrice:t},(function(){this.props.addToTotal(t),r&&this.props.addToTotalValueAdded(t)})))},a.handleInputDiscount=function(e){var t=a.state,n=t.pPrice,l=t.pChecked,r=t.pRate,o=t.pQTY,c=a.props.pCost,s=e.target.value,i=o?parseFloat(r*o-r*o*s/100).toFixed(2):0;i>(o*c).toFixed(2)&&(a.props.minusFromTotal(n),l&&a.props.minusFromTotalValueAdded(n),a.setState({pDiscount:s,pPrice:i},(function(){this.props.addToTotal(i),l&&this.props.addToTotalValueAdded(i)})))},a.handleBlurQty=function(e){if(0==e.target.value||""==e.target.value){var t,n=a.state,l=n.pPrice,r=n.pChecked,o=n.pDiscount,c=n.pRate,s=a.props.pCost;a.setState({pQTY:1}),(t=parseFloat(1*c-1*c*o/100).toFixed(2))>1*s&&(a.props.minusFromTotal(l),r&&a.props.minusFromTotalValueAdded(l),a.setState({pPrice:t},(function(){this.props.addToTotal(t),r&&this.props.addToTotalValueAdded(t)})))}},a.onKeyPress=function(e){[46,48,49,50,51,52,53,54,55,56,57].includes(e.which)||e.preventDefault()},a.handleChangeExtraAdded=function(){a.setState({pChecked:!a.state.pChecked},(function(){this.state.pChecked?this.props.addToTotalValueAdded(this.state.pPrice):this.props.minusFromTotalValueAdded(this.state.pPrice)}))},a.state={pRate:e.pRate,pQTY:e.pQTY,pDiscount:e.pDiscount,pPrice:e.pPrice,pChecked:e.pChecked},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"deleteRowfn",value:function(e){var t=e.target.closest("tr"),a=t.rowIndex,n=t.cells[6].innerHTML,l=this.state.pChecked;this.props.deleteProductFrmTbl(n,a,l)}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.pId,l=t.pSKU,r=t.pRemarks,o=t.pRate,c=t.pCost,s=t.allData,d=this.state,m=d.pQTY,u=d.pPrice,p=d.pDiscount,h=d.pChecked,f=s.allProducts&&s.allProducts.filter((function(e){return e.id===Number(n)})).shift(),g=f?f.name:"Not Found";return i.a.createElement("tr",{onMouseEnter:this.mouseEntered,onMouseLeave:this.mouseLeft},i.a.createElement("th",{scope:"row",className:"font-weight-bold colorBlue"},a),i.a.createElement("td",null,g),i.a.createElement("td",null,l),i.a.createElement("td",null,o),i.a.createElement("td",null,i.a.createElement("input",{type:"text",className:"m-0 text-center w-75 colorBlue p-0",onKeyPress:this.onKeyPress,onInput:this.handleInputQty,ref:function(t){return e.inputEditQty=t},value:m,onChange:function(){},onBlur:this.handleBlurQty,style:{border:"none",outline:"none"}})),i.a.createElement("td",null,i.a.createElement("input",{type:"text",className:"m-0 text-center w-75 colorBlue p-0",onKeyPress:this.onKeyPress,onInput:this.handleInputDiscount,ref:function(t){return e.inputEditDiscount=t},value:p,onChange:function(){},style:{border:"none",outline:"none"}})),i.a.createElement("td",null,u),i.a.createElement("td",{suppressContentEditableWarning:!0,contentEditable:"true"},r),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",onChange:this.handleChangeExtraAdded,checked:h,style:{verticalAlign:"middle"},className:"fontRaleway"})),i.a.createElement("td",{style:{display:"none"}},c),i.a.createElement("td",{style:{display:"none"}},n),i.a.createElement("td",null,i.a.createElement(b.b,{style:{fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"},color:"white",onClick:this.deleteRowfn.bind(this),className:"mx-0 my-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))}}]),t}(s.Component),qe=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).addProductToTbl=function(e,t,n,l,r,o,c,s,d){var m=[],u=a.state.Rows,p=u.length+1,h=a.props,f=h.allData,b=h.minusFromTotal,g=h.addToTotal,E=h.minusFromTotalValueAdded,v=h.addToTotalValueAdded;m.push(i.a.createElement(Ae,{index:p,pId:e,pSKU:t,pRate:n,pQTY:l,pDiscount:r,pPrice:o,pRemarks:c,pChecked:s,pCost:d,key:Math.random(),deleteProductFrmTbl:a.deleteProductFrmTbl,minusFromTotal:b,addToTotal:g,minusFromTotalValueAdded:E,addToTotalValueAdded:v,allData:f})),0===u.length?a.setState({displayTable:!0,submitOrderBtn:!0,Rows:[].concat(Object(Ve.a)(u),[m])}):a.setState({Rows:[].concat(Object(Ve.a)(u),[m])})},a.deleteProductFrmTbl=function(e,t,n){var l=a.state.Rows;-1!==t&&l.splice(t-1,1),a.props.minusFromTotal(e),n&&a.props.minusFromTotalValueAdded(e),0===l.length?a.setState({Rows:l,submitOrderBtn:!1,displayTable:!1}):a.setState({Rows:l})},a.submitOrder=function(){var e=[],t=!0;if(a.props.checkOrderValidity()){for(var n=document.getElementById("orderProductsTable"),l=n.rows.length-1;l>0;l--){var r=n.rows[l].cells[10].innerHTML,o=n.rows[l].cells[2].innerHTML,c=n.rows[l].cells[3].innerHTML,s=n.rows[l].cells[4].childNodes[0].value,i=n.rows[l].cells[5].childNodes[0].value,d=n.rows[l].cells[6].innerHTML,m=n.rows[l].cells[7].innerHTML,u=n.rows[l].cells[8].childNodes[0].checked,p=n.rows[l].cells[9].innerHTML;if(0==s||""==s){a.refs.validatingLabel.innerHTML="You can't set any product's quantity to 0.",t=!1;break}var h={product_id:r,product_sku:o,product_cost:p,product_rate:c,product_qty:s,product_discount:i,product_price:d,product_remarks:m,product_extra_added:u};e.push(h)}t&&a.props.saveOrderDetailsToDB(e)}else alert("Please enter all required data.")},a.makeTableEmpty=function(){a.setState({Rows:[],submitOrderBtn:!1,displayTable:!1})},a.state={Rows:[],submitOrderBtn:!1,displayTable:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.submitOrderBtn,a=e.displayTable,n=this.props.orderState;return i.a.createElement(b.w,{className:"my-3 mx-0 p-0"},i.a.createElement(b.g,{className:"m-0 p-0"},a?i.a.createElement(b.a,{type:"fadeInDown",duration:"1500ms",delay:"0ms"},i.a.createElement("fieldset",{className:"borderBlue px-3 pb-0 pt-2 w-100"},i.a.createElement("legend",{className:"legend-border"},"Products to be sale:"),i.a.createElement(b.w,{className:"m-0 p-0 table-responsive"},i.a.createElement("table",{id:"orderProductsTable",className:"table table-sm table-hover table-bordered mb-0"},t?i.a.createElement("caption",{className:"mx-0 my-2 p-0 text-left"},i.a.createElement("button",{type:"button",onClick:this.submitOrder,style:{fontSize:"17px",borderRadius:"4px"},className:"fontRaleway btn py-1 px-2 mx-0 my-2 w-100 font-weight-bold text-white borderBlue backGround-blue"},"new"===n?"SUBMIT":"UPDATE"),i.a.createElement("label",{ref:"validatingLabel",className:"p-0 validatingLabel"})):null,i.a.createElement("thead",{className:"text-white"},i.a.createElement("tr",null,i.a.createElement("th",{scope:"col",style:{borderTopLeftRadius:"10px"}},"#"),i.a.createElement("th",{scope:"col"},"Product"),i.a.createElement("th",{scope:"col"},"SKU"),i.a.createElement("th",{scope:"col"},"Rate"),i.a.createElement("th",{scope:"col"},"QTY"),i.a.createElement("th",{scope:"col"},"Discount (%)"),i.a.createElement("th",{scope:"col"},"Price"),i.a.createElement("th",{scope:"col"},"Remarks"),i.a.createElement("th",{scope:"col"},"Extra Added?"),i.a.createElement("th",{scope:"col",style:{borderTopRightRadius:"10px"}},"Action"))),i.a.createElement("tbody",{className:"p-0 m-0"},this.state.Rows))))):null))}}]),t}(s.Component),Fe=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).addProductToTbl=function(t,a,n,l,r,o,c,s,i){e.refs.orderProductsTable.addProductToTbl(t,a,n,l,r,o,c,s,i),e.addToTotal(o),s&&e.addToTotalValueAdded(o)},e.minusFromTotal=function(t){var a=parseFloat(Number(e.state.orderTotal)-Number(t)).toFixed(2);e.setState({orderTotal:a})},e.addToTotal=function(t){var a=parseFloat(Number(e.state.orderTotal)+Number(t)).toFixed(2);e.setState({orderTotal:a})},e.minusFromTotalValueAdded=function(t){var a=parseFloat(Number(e.state.totalValueAdded)-Number(t)).toFixed(2);e.setState({totalValueAdded:a})},e.addToTotalValueAdded=function(t){var a=parseFloat(Number(e.state.totalValueAdded)+Number(t)).toFixed(2);e.setState({totalValueAdded:a})},e.checkOrderValidity=function(){var t=e.refs.orderDetails.checkValidity(),a=e.refs.orderDetails.checkValidity();return!(!t||!a)},e.saveOrderDetailsToDB=function(t){var a=e.refs.orderDetails.state,n=a.orderDate,l=a.orderId,r=a.orderSource,o=a.orderStatus;t.map((function(t){t.order_date=n,t.order_id=l,t.order_source=r.value,t.order_status=o.value,t.detail_type="sale"===e.state.orderType&&"Sale"}));var c={method:"POST",body:JSON.stringify({orderDetails:t}),headers:{"Content-Type":"application/json"}};fetch("/addNewOrderDetails",c).then((function(e){return e.json()})).then((function(t){console.log(t);var a=!0;t.data.forEach((function(e){e.success||(a=!1)})),a&&e.saveOrderToDB()})).catch((function(e){return console.log(e)}))},e.saveOrderToDB=function(){var t=e.refs.orderDetails.state,a=t.orderId,n=t.orderDate,l=t.orderSource,r=t.orderNote,o=t.orderStatus,c=e.state,s=c.orderTotal,i=c.totalValueAdded,d=c.orderType,m=e.refs.orderCustomerDetails.state,u=m.cName,p=m.cContact,h=m.cAddress,f={orderId:a,date:n,source:l.value,status:o.value,orderType:d,note:r,total:s,totalAddedValue:i,cName:u,cContact:p,cAddress:h},b={method:"POST",body:JSON.stringify(f),headers:{"Content-Type":"application/json"}};fetch("/addNewOrder",b).then((function(e){return e.json()})).then((function(t){console.log(t),t.success?(e.refs.orderProductsTable.makeTableEmpty(),e.refs.orderDetails.makeFormEmpty(),e.refs.orderCustomerDetails.makeFormEmpty(),e.setState({orderTotal:0,totalValueAdded:0})):alert(t.message)})).catch((function(e){return console.log(e)}))},e.state={orderTotal:0,totalValueAdded:0,orderType:"sale",orderState:"new"},e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.orderTotal,a=e.totalValueAdded,n=e.orderState,l=e.orderType,r=this.props.allData;return i.a.createElement(h,{I:"create",a:"order"},i.a.createElement(b.c,{style:{marginTop:"50px",borderRadius:"15px",marginBottom:"20px"},className:"w-100"},i.a.createElement(b.e,{tag:"h4",className:"text-center text-white font-weight-bold backGround-green",style:{borderTopRightRadius:"15px",borderTopLeftRadius:"15px"}},"sale"===l?"Order":"refund"===l?"Refund":"Replacement"," Details"),i.a.createElement(b.d,{className:"px-5 py-4 m-0"},i.a.createElement(_e,{ref:"orderDetails",orderState:n,orderType:l}),i.a.createElement(Le,{ref:"orderCustomerDetails"}),i.a.createElement(Me,{ref:"orderProductDetails",addProductToTbl:this.addProductToTbl,deleteRowsFromtbl:this.deleteRowsFromtbl,allData:r,orderState:n,orderType:l}),i.a.createElement(b.w,{end:!0,className:"mb-0 mt-3 p-0"},i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:t,label:"Total",hint:"Total",disabled:!0,className:"m-0",style:{fontWeight:"bold"}})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:a,className:"m-0",style:{fontWeight:"bold"},label:"Total value added",hint:"Total value added",disabled:!0}))),i.a.createElement(qe,{ref:"orderProductsTable",saveOrderDetailsToDB:this.saveOrderDetailsToDB,saveOrderToDB:this.saveOrderToDB,checkOrderValidity:this.checkOrderValidity,minusFromTotal:this.minusFromTotal,addToTotal:this.addToTotal,minusFromTotalValueAdded:this.minusFromTotalValueAdded,addToTotalValueAdded:this.addToTotalValueAdded,orderState:n,orderType:l,allData:r}))))}}]),t}(i.a.Component),Ue=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"order"},i.a.createElement(Fe,{allData:e}))}}]),t}(s.Component),He=function(e){var t=e.allData,a=new URLSearchParams(window.location.search),n=Number(a.get("order")),l=[],r=t&&t.allOrders.filter((function(e){return e.id===n})).shift(),o=t&&t.allOrderDetails.filter((function(e){return e.order_id===r.order_id}));return o&&o.forEach((function(e){l.push(i.a.createElement("tr",{key:l.length},i.a.createElement("th",{scope:"row",className:"font-weight-bold colorBlue"},l.length+1),i.a.createElement("td",null,e.product_name),i.a.createElement("td",null,e.product_sku),i.a.createElement("td",null,e.product_rate),i.a.createElement("td",null,e.product_qty),i.a.createElement("td",null,e.product_discount," "),i.a.createElement("td",null,e.product_price),i.a.createElement("td",null,e.product_remarks),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",disabled:!0,checked:e.product_extra_added,style:{verticalAlign:"middle"},className:"fontRaleway"}))))})),i.a.createElement(h,{I:"read",a:"order"},i.a.createElement(b.c,{style:{marginTop:"50px",borderRadius:"15px",marginBottom:"20px"},className:"w-100"},i.a.createElement(b.e,{tag:"h4",className:"text-center text-white font-weight-bold backGround-green",style:{borderTopRightRadius:"15px",borderTopLeftRadius:"15px"}},"Your Order"),i.a.createElement(b.d,{className:"px-5 py-4 m-0"},i.a.createElement("fieldset",{className:"borderBlue py-0 px-3 mb-3 w-100"},i.a.createElement("legend",{className:"legend-border"}," Order:"),i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{className:"m-0"},i.a.createElement(b.w,{center:!0,className:"m-0 p-0"},i.a.createElement(b.g,{xl:"2",lg:"2",md:"2",sm:"6",className:"m-0",middle:!0},i.a.createElement(b.l,{className:"m-0",value:r.order_id,label:"Id",outline:!0,disabled:!0})),i.a.createElement(b.g,{xl:"2",lg:"2",md:"3",sm:"6",className:"my-2",middle:!0},i.a.createElement(b.l,{className:"m-0",value:new Date(r.date).toLocaleDateString(),label:"Date",outline:!0,disabled:!0})),i.a.createElement(b.g,{xl:"4",lg:"4",md:"3",sm:"6",className:"my-2",middle:!0},i.a.createElement(b.l,{className:"m-0",value:r.source,label:"Source",outline:!0,disabled:!0})),i.a.createElement(b.g,{xl:"4",lg:"4",md:"4",sm:"6",className:"my-2",middle:!0},i.a.createElement(b.l,{className:"m-0",value:r.status,label:"Status",outline:!0,disabled:!0})),i.a.createElement(b.g,{md:"4",className:"m-0",sm:"6",middle:!0},i.a.createElement(b.l,{label:"Tracking Id",value:r.tracking_id||" ",outline:!0,className:"m-0",disabled:!0})),i.a.createElement(b.g,{md:"8",sm:"6",className:"m-0",middle:!0},i.a.createElement(b.l,{type:"textarea",rows:"1",label:"Note",value:r.note,outline:!0,className:"m-0",style:{borderRadius:"4px"}})))))),i.a.createElement("fieldset",{className:"borderBlue mb-3 py-0 px-3 w-100"},i.a.createElement("legend",{className:"legend-border"},"Customer:"),i.a.createElement(b.w,{className:"m-0 p-0"},i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:r.customer_name,className:"my-0",style:{marginRight:"4px"},label:"Name",disabled:!0,outline:!0})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:r.customer_contact,className:"my-0",style:{marginRight:"4px"},label:"Contact",disabled:!0,outline:!0})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:r.customer_address,className:"my-0",type:"textarea",rows:"1",style:{marginRight:"4px"},label:"Address",disabled:!0,outline:!0})))),i.a.createElement(b.w,{end:!0,className:"mb-0 mt-3 p-0"},i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:r.total,label:"Total",disabled:!0,className:"m-0",style:{fontWeight:"bold"}})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:r.total_value_added,className:"m-0",style:{fontWeight:"bold"},label:"Total value added",disabled:!0}))),i.a.createElement("fieldset",{className:"borderBlue px-3 pb-0 pt-2 w-100"},i.a.createElement("legend",{className:"legend-border"},"Products:"),i.a.createElement(b.w,{className:"m-0 p-0 table-responsive"},i.a.createElement("table",{id:"",className:"table table-sm table-hover table-bordered mb-3"},i.a.createElement("thead",{className:"text-white"},i.a.createElement("tr",null,i.a.createElement("th",{scope:"col",style:{borderTopLeftRadius:"10px"}},"#"),i.a.createElement("th",{scope:"col"},"Product"),i.a.createElement("th",{scope:"col"},"SKU"),i.a.createElement("th",{scope:"col"},"Rate"),i.a.createElement("th",{scope:"col"},"QTY"),i.a.createElement("th",{scope:"col"},"Discount (%)"),i.a.createElement("th",{scope:"col"},"Price"),i.a.createElement("th",{scope:"col"},"Remarks"),i.a.createElement("th",{scope:"col",style:{borderTopRightRadius:"10px"}},"Extra Added ?"))),i.a.createElement("tbody",{className:"p-0 m-0"},l)))))))},We=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"order"},i.a.createElement(He,{allData:e}))}}]),t}(s.Component),ze=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this))).componentDidMount=function(){var e=a.state,t=e.desiredOrder,n=e.desiredOrderDetails,l=[];t&&(a.refs.orderDetails.setState({orderId:t.order_id,orderDate:new Date(t.date),orderSource:{value:t.source,label:t.source,key:1,color:"#112648"},orderStatus:{value:t.status,label:t.status,key:1,color:"#112648"},courier:t.courier||"",orderTracking:t.tracking_id||"",orderNote:t.note}),a.refs.orderCustomerDetails.setState({cName:t.customer_name,cContact:t.customer_contact,cAddress:t.customer_address}),n&&(n.forEach((function(e){l.push(i.a.createElement(Ae,{index:l.length,pId:e.product_id,pSKU:e.product_sku,pCost:e.product_cost,pRate:e.product_rate,pQTY:e.product_qty,pDiscount:e.product_discount,pPrice:e.product_price,pRemarks:e.product_remarks,pChecked:e.product_extra_added,key:Math.random(),deleteProductFrmTbl:a.refs.orderProductsTable.deleteProductFrmTbl,minusFromTotal:a.minusFromTotal,addToTotal:a.addToTotal,minusFromTotalValueAdded:a.minusFromTotalValueAdded,addToTotalValueAdded:a.addToTotalValueAdded,allData:a.props.allData}))})),a.refs.orderProductsTable.setState({Rows:l,submitOrderBtn:!0,displayTable:!0})))},a.addProductToTbl=function(e,t,n,l,r,o,c,s,i){a.refs.orderProductsTable.addProductToTbl(e,t,n,l,r,o,c,s,i),a.addToTotal(o),s&&a.addToTotalValueAdded(o)},a.minusFromTotal=function(e){var t=parseFloat(Number(a.state.orderTotal)-Number(e)).toFixed(2);a.setState({orderTotal:t,tableUpdated:!0})},a.addToTotal=function(e){var t=parseFloat(Number(a.state.orderTotal)+Number(e)).toFixed(2);a.setState({orderTotal:t,tableUpdated:!0})},a.minusFromTotalValueAdded=function(e){var t=parseFloat(Number(a.state.totalValueAdded)-Number(e)).toFixed(2);a.setState({totalValueAdded:t,tableUpdated:!0})},a.addToTotalValueAdded=function(e){var t=parseFloat(Number(a.state.totalValueAdded)+Number(e)).toFixed(2);a.setState({totalValueAdded:t,tableUpdated:!0})},a.checkOrderValidity=function(){var e=a.refs.orderDetails.checkValidity(),t=a.refs.orderDetails.checkValidity();return!(!e||!t)},a.saveOrderDetailsToDB=function(e){var t=a.refs.orderDetails.state,n=t.orderDate,l=t.orderId,r=t.orderSource,o=t.orderStatus;if(a.state.tableUpdated){var c={method:"DELETE",body:JSON.stringify({orderId:l}),headers:{"Content-Type":"application/json"}};fetch("/deleteOrderDetails",c).then((function(e){return e.json()})).then((function(t){if(console.log(t),t.success){e.map((function(e){e.order_date=n,e.order_id=l,e.order_source=r.value,e.order_status=o.value,e.detail_type="sale"===a.state.orderType&&"Sale"}));var c={method:"POST",body:JSON.stringify({orderDetails:e}),headers:{"Content-Type":"application/json"}};fetch("/addNewOrderDetails",c).then((function(e){return e.json()})).then((function(e){console.log(e);var t=!0;e.data.forEach((function(e){e.success||(t=!1)})),t&&a.saveOrderToDB()})).catch((function(e){return console.log(e)}))}})).catch((function(e){return console.log(e)}))}else{var s={orderId:l,orderDate:n,orderSource:r.value,orderStatus:o.value},i={method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}};fetch("/updateOrderDetails",i).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&a.saveOrderToDB()})).catch((function(e){return console.log(e)}))}},a.saveOrderToDB=function(){var e=a.refs.orderDetails.state,t=e.orderDate,n=e.orderSource,l=e.orderNote,r=e.orderStatus,o=e.orderTracking,c=e.courier,s=a.state,i=s.orderTotal,d=s.totalValueAdded,m=s.desiredOrder,u=a.refs.orderCustomerDetails.state,p=u.cName,h=u.cContact,f=u.cAddress,b={id:m.id,date:t,source:n.value,status:r.value,courier:c,trackingId:o,note:l,total:i,totalAddedValue:d,cName:p,cContact:h,cAddress:f},g={method:"PUT",body:JSON.stringify(b),headers:{"Content-Type":"application/json"}};fetch("/updateOrder",g).then((function(e){return e.json()})).then((function(e){console.log(e),e.success?window.location.reload():alert(e.message)})).catch((function(e){return console.log(e)}))};var l=new URLSearchParams(window.location.search),c=Number(l.get("order")),s=e.allData,d=s&&s.allOrders&&s.allOrders.filter((function(e){return e.id===c})).shift(),m=d&&s&&s.allOrderDetails&&s.allOrderDetails.filter((function(e){return e.order_id===d.order_id}));return a.state={orderBeingEdited:d,orderDetailsBeingEdited:m,orderTotal:d&&d.total||0,totalValueAdded:d&&d.total_value_added||0,orderType:"sale",orderState:"edit",desiredOrder:d,desiredOrderDetails:m,displayAddFormButton:!0,tableUpdated:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.orderTotal,n=t.totalValueAdded,l=t.orderState,r=t.displayAddFormButton,o=t.desiredOrder,c=t.desiredOrderDetails,s=this.props.allData;return i.a.createElement(h,{I:"create",a:"order"},i.a.createElement(b.c,{style:{marginTop:"50px",borderRadius:"15px",marginBottom:"20px"},className:"w-100"},i.a.createElement(b.e,{tag:"h4",className:"text-center text-white font-weight-bold backGround-green",style:{borderTopRightRadius:"15px",borderTopLeftRadius:"15px"}},"Order Details"),i.a.createElement(b.d,{className:"px-5 py-4 m-0"},i.a.createElement(_e,{ref:"orderDetails",orderState:l,orderBeingEdited:o,orderDetailsBeingEdited:c}),i.a.createElement(Le,{ref:"orderCustomerDetails"}),i.a.createElement(Me,{ref:"orderProductDetails",addProductToTbl:this.addProductToTbl,deleteRowsFromtbl:this.deleteRowsFromtbl,allData:s,orderState:l}),i.a.createElement(b.w,{end:!0,className:"mb-0 mt-3 p-0"},r?i.a.createElement(b.g,{sm:"4",middle:!0,className:"m-0"},i.a.createElement("button",{style:{fontSize:"17px",borderRadius:"4px",color:"white"},onClick:function(){e.refs.orderProductDetails.setState({displayForm:!0},e.setState({displayAddFormButton:!1}))},className:"btn py-1 px-2 font-weight-bold backGround-blue fontRaleway borderBlue"},"Add New Product")):null,i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:a,label:"Total",hint:"Total",disabled:!0,className:"m-0",style:{fontWeight:"bold"}})),i.a.createElement(b.g,{sm:"4",className:"m-0"},i.a.createElement(b.l,{value:n,className:"m-0",style:{fontWeight:"bold"},label:"Total value added",hint:"Total value added",disabled:!0}))),i.a.createElement(qe,{ref:"orderProductsTable",saveOrderDetailsToDB:this.saveOrderDetailsToDB,saveOrderToDB:this.saveOrderToDB,checkOrderValidity:this.checkOrderValidity,minusFromTotal:this.minusFromTotal,addToTotal:this.addToTotal,minusFromTotalValueAdded:this.minusFromTotalValueAdded,addToTotalValueAdded:this.addToTotalValueAdded,orderState:l,allData:s}))))}}]),t}(i.a.Component),Ye=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"order"},i.a.createElement(ze,{allData:e}))}}]),t}(s.Component),Ge=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){a.props.history.push({pathname:"/orders/edit",search:"order=".concat(e)})}},a.handleView=function(e){return function(t){a.props.history.push({pathname:"/orders/view",search:"order=".concat(e)})}},a.redirectToNewEntityPath=function(){a.props.history.push("/orders/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,orderToBeDeleted:e}),a.refs.deleteModal.setState({modalShow:!0})}},a.deleteOrder=function(){var e=a.state,t=e.rowToBeDeleted,n={value:e.orderToBeDeleted},l={method:"DELETE",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/deleteOrder",l).then((function(e){return e.json()})).then((function(e){e.success&&document.getElementById("allOrdersTable").deleteRow(t)})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={rowToBeDeleted:"",orderToBeDeleted:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.allData.allOrders,n=[],l=0,r={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};return a&&a.forEach((function(e){l+=1,n.push({index:l,orderId:e.order_id,date:new Date(e.date).toLocaleDateString(),source:e.source,status:e.status,tracking:e.tracking_id,total:e.total,totalValueAdded:e.total_value_added,cName:e.customer_name,cContact:e.customer_contact,cAddress:e.customer_address,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"read",a:"order"},i.a.createElement(b.b,{style:r,color:"white",onClick:t.handleView(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"eye iconGreen"}))),i.a.createElement(h,{I:"update",a:"order"},i.a.createElement(b.b,{style:r,color:"white",onClick:t.handleEdit(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"order"},i.a.createElement(b.b,{style:r,color:"white",onClick:t.handleDelete(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})})),e={columns:[{label:"#",field:"index"},{label:"Id",field:"orderId"},{label:"Date",field:"date"},{label:"Source",field:"source"},{label:"Status",field:"status"},{label:"Tracking Id",field:"tracking"},{label:"Total",field:"total"},{label:"TVA",field:"totalValueAdded"},{label:"Customer",field:"cName"},{label:"Contact",field:"cContact"},{label:"Address",field:"cAddress"},{label:"Action",field:"buttons"}],rows:n},i.a.createElement(h,{I:"read",a:"order"},i.a.createElement(_,{cardHeading:"Orders",permissionEntity:"order",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Order",tableId:"allOrdersTable",data:e}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteOrder}))}}]),t}(s.Component),Qe=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"order"},i.a.createElement(Ge,this.props))}}]),t}(s.Component),Je=function(e){var t,a=e.allData,n=a.allOrderDetails,l=a.allProducts,r=[],o=0;return n&&n.forEach((function(e){o+=1;var t=l&&l.filter((function(t){return t.id===Number(e.product_id)})).shift(),a=t?t.name:"Not Found";r.push({index:o,orderId:e.order_id,date:new Date(e.order_date).toLocaleDateString(),source:e.order_source,status:e.order_status,pName:a,pSku:e.product_sku,pCost:e.product_cost,pRate:e.product_rate,pQty:e.product_qty,pDiscount:e.product_discount,pPrice:e.product_price})})),t={columns:[{label:"#",field:"index"},{label:"Order-Id",field:"orderId"},{label:"Date",field:"date"},{label:"Source",field:"source"},{label:"Status",field:"status"},{label:"Product",field:"pName"},{label:"SKU",field:"pSku"},{label:"Cost",field:"pCost"},{label:"Rate",field:"pRate"},{label:"QTY",field:"pQty"},{label:"Discount (%)",field:"pDiscount"},{label:"Price",field:"pPrice"}],rows:r},i.a.createElement(h,{I:"read",a:"orderDetail"},i.a.createElement(_,{cardHeading:"Order-Details",permissionEntity:"orderDetail",tableId:"allOrderDetailsTable",data:t}))},Ke=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"orderDetail"},i.a.createElement(Je,this.props))}}]),t}(s.Component),$e=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/orders/new",render:function(){return i.a.createElement(Ue,{allData:t})}}),i.a.createElement(m.b,{path:"/orders/view",render:function(){return i.a.createElement(We,{allData:t})}}),i.a.createElement(m.b,{path:"/orders/edit",render:function(){return i.a.createElement(Ye,{allData:t})}}),i.a.createElement(m.b,{path:"/orders/all",render:function(e){return i.a.createElement(Qe,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/orders/order_details",render:function(){return i.a.createElement(Ke,{allData:t})}}))},Xe=function(e){function t(e){var a;Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e))).makeStateEmpty=function(){a.setState({invoice_id:Math.floor(2e5*Math.random()+1),selectedClient:"",selectedCompany:"",address:"",phone:"",items:[],service:"",detail:"",rate:"",qty:""})},a.printInvoice=function(){a.setState({message:""});var e=document.getElementById("capture").innerHTML,t=document.body.innerHTML;document.body.innerHTML=e,window.print(),document.body.innerHTML=t,window.location.reload(),setTimeout((function(){a.makeStateEmpty()}),1500)},a.submitInvoice=function(){var e=a.state,t=e.items,n=e.printInvoice,l=a.total_amount.state.innerValue,r=a.selectClientForm;if(!1===r.checkValidity())r.classList.add("was-validated");else{if(0===t.length)return void a.setState({message:"No Invoice Data !"});if(isNaN(l))return void a.setState({message:"Please enter a valid price!"});var o=a.state,c=o.invoice_id,s=o.selectedClient,i={slagme:c,companyId:o.selectedCompany,cId:s,address:o.address,number:o.phone,date:o.date,total_amount:l};if(a.editingInvoiceId){var d={method:"DELETE",headers:{"Content-Type":"application/json"}};fetch("/deleteInvoiceDetails/".concat(c),d).then((function(e){return e.json()})).then((function(e){if(console.log(e),a.setState({message:e.message}),e.success){var l=d;l.method="PUT",l.body=JSON.stringify(i),fetch("/updateInvoice/".concat(a.editingInvoiceId),l).then((function(e){return e.json()})).then((function(e){if(console.log(e),a.setState({message:e.message}),e.success){var r=l;r.method="POST",r.body=JSON.stringify(t),fetch("/addNewInvoiceDetails",r).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({message:e.message}),e.success&&(a.selectClientForm.classList.remove("was-validated"),n?a.printInvoice():a.makeStateEmpty())}))}})).catch((function(e){return console.log(e)}))}})).catch((function(e){return console.log(e)}))}else{var m={method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}};fetch("/addNewInvoice",m).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({message:e.message}),e.success&&(m.body=JSON.stringify(t),fetch("/addNewInvoiceDetails",m).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({message:e.message}),e.success&&(a.selectClientForm.classList.remove("was-validated"),n?a.printInvoice():a.makeStateEmpty())})).catch((function(e){return console.log(e)})))})).catch((function(e){console.log(e)}))}}},a.componentDidMount=function(){if(a.editingInvoiceId){var e=a.props.allData,t=e.allInvoices,n=e.allInvoiceDetails,l=t&&t.filter((function(e){return e.id===a.editingInvoiceId})).shift(),r=l&&n&&n.filter((function(e){return e.invoice_id===Number(l.slagme)})),o=[];r&&r.forEach((function(e){o.push({invoice_id:e.invoice_id,service:e.service,detail:e.detail,rate:e.rate,qty:e.qty,price:e.price})})),l&&a.setState({date:new Date(l.date).toDateString(),invoice_id:l.slagme,selectedClient:l.c_id,selectedCompany:l.company_id,address:l.c_address,phone:l.c_number,items:o})}},a.calculateTotal=function(){var e=0;return 0!==a.state.items.length&&a.state.items.forEach((function(t){e+=Number(t.price)})),e},a.onChangeSelect=function(e){return function(t){if("client"===e){var n=a.state.clients.filter((function(e){return e.id==t.target.value})).shift();n?a.setState({selectedClient:n.id,address:n.address,phone:n.cell}):a.setState({selectedClient:"",address:"",phone:""})}else a.setState({selectedCompany:Number(t.target.value)})}},a.onInput=function(e){return function(t){var n;a.setState((n={},Object(E.a)(n,e,t.target.value),Object(E.a)(n,"message",""),n))}},a.addItem=function(e){if(e.preventDefault(),!1!==a.addItemForm.checkValidity()){var t=a.state,n=t.invoice_id,l=t.detail,r=t.qty,o=t.rate,c={invoice_id:n,service:t.service,detail:l,rate:o,qty:r,price:a.price.state.innerValue};a.setState({items:[].concat(Object(Ve.a)(a.state.items),[c]),detail:"",service:"",rate:"",qty:"",price:""},(function(){this.addItemForm.classList.remove("was-validated")}))}else a.addItemForm.classList.add("was-validated")},a.tdOnBlur=function(e,t){return function(n){var l=n.target;a.setState((function(a){return{items:a.items.map((function(a,n){return n===e?(a[t]=l.innerHTML,"detail"!==t&&(a.price="rate"===t?Number(l.innerHTML*a.qty):Number(a.rate*l.innerHTML)),a):a}))}}))}},a.deleteItemData=function(e){return function(t){a.setState((function(t){return{items:t.items.filter((function(t,a){return a!==e}))}}))}},a.onKeyPress=function(e){[46,48,49,50,51,52,53,54,55,56,57].includes(e.which)||e.preventDefault()},a.editingInvoiceId=e.id;var l=e.allData,c=l.allRoles,s=l.allUsers,i=l.allCompanies,d=c&&c.filter((function(e){return"client"===e.name})).shift(),m=d&&d.id,u=s&&s.filter((function(e){return e.role_id===m}));return a.state={date:(new Date).toDateString(),invoice_id:Math.floor(2e5*Math.random()+1),address:"",phone:"",total:0,selectedClient:"",clients:u,selectedCompany:"",companies:i,items:[],service:"",detail:"",rate:"",qty:"",message:"",printInvoice:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.date,n=t.invoice_id,l=t.selectedClient,r=t.selectedCompany,o=t.phone,c=t.address,s=t.service,d=t.detail,m=t.rate,u=t.qty,p=t.clients,h=t.companies,f=t.message,g=t.printInvoice,E={fontSize:"0.8rem"},v=p&&p.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)})),y=h&&h.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id},e.name)})),N=h&&h.filter((function(e){return e.id===Number(r)})).shift(),I=[];return this.state.items.map((function(t,a){I.push(i.a.createElement("tr",{key:a,className:"text-center"},i.a.createElement("td",null,t.service),i.a.createElement("td",{onBlur:e.tdOnBlur(a,"detail"),suppressContentEditableWarning:!0,contentEditable:!0},t.detail),i.a.createElement("td",{onBlur:e.tdOnBlur(a,"rate"),suppressContentEditableWarning:!0,contentEditable:!0,onKeyPress:e.onKeyPress},t.rate),i.a.createElement("td",{onBlur:e.tdOnBlur(a,"qty"),suppressContentEditableWarning:!0,contentEditable:!0,onKeyPress:e.onKeyPress},t.qty),i.a.createElement("td",null,t.rate*t.qty),i.a.createElement("td",{className:"printHide"},i.a.createElement(b.b,{size:"sm",color:"danger",onClick:e.deleteItemData(a)},i.a.createElement("i",{className:"fas fa-trash"})))))})),i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"row m-4"},i.a.createElement("div",{className:"col-sm-12",id:"capture"},i.a.createElement(b.c,null,i.a.createElement(b.d,null,i.a.createElement("h2",{className:"text-center invoiceHeader",style:{backgroundColor:"#9ACD32",color:"white"}},"INVOICE"),i.a.createElement("div",{className:"row m-0 p-0"},i.a.createElement("div",{className:"col-sm-3 align-self-center mb-0 mt-4 p-0"},i.a.createElement(b.l,{label:"Date",className:"m-0",disabled:!0,value:a}),i.a.createElement(b.l,{label:"Id",className:"m-0",disabled:!0,value:n})),i.a.createElement("div",{className:"col-sm-6 align-self-center m-0 p-0"},i.a.createElement("img",{src:N&&"/getImage/".concat(N.logo),alt:N&&N.name,width:"100%",height:"auto"}),i.a.createElement("br",null)),i.a.createElement("div",{className:"col-md-3 mb-0 mt-4 p-0 align-self-center"},i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col-2 text-center  m-0 p-0"},i.a.createElement("i",{className:"fa fa-mobile-alt"})),i.a.createElement("div",{className:"col-10 m-0 p-0 text-left",style:E},N&&N.cell)),i.a.createElement("div",{className:"row mb-2"},i.a.createElement("div",{className:"col-2 text-center  m-0 py-0 pr-0 pl-0"},i.a.createElement("i",{className:"fa fa-envelope"})),i.a.createElement("div",{className:"col-10 m-0 p-0 text-left",style:E},N&&N.email)),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-2 text-center  m-0 p-0"},i.a.createElement("i",{className:"fa fa-map-marker-alt"})),i.a.createElement("div",{className:"col-10 m-0 p-0 text-left",style:E},N&&N.address)))),i.a.createElement("form",{ref:function(t){return e.selectClientForm=t},noValidate:!0},i.a.createElement("div",{className:"row justify-content-start"},i.a.createElement("div",{className:"col-sm-4 mb-0"},i.a.createElement("br",null),i.a.createElement("select",{value:l,className:"browser-default custom-select mt-1 p-2",onChange:this.onChangeSelect("client"),required:!0},i.a.createElement("option",{key:Math.random(),value:"",disabled:!0},"Select Client..."),v)),i.a.createElement("div",{className:"col-sm-4 mb-0"},i.a.createElement(b.l,{label:"Phone",value:o,className:"my-0 px-2",disabled:!0,required:!0})),i.a.createElement("div",{className:"col-sm-4 m-0 printHide"},i.a.createElement("br",null),i.a.createElement("select",{value:r,className:"browser-default custom-select mt-1 p-2",onChange:this.onChangeSelect("company"),required:!0},i.a.createElement("option",{key:Math.random(),value:"",disabled:!0},"Select Company..."),y)),i.a.createElement("div",{className:"col-sm-12 clientAddress "},i.a.createElement(b.l,{label:"Address",value:c,disabled:!0,required:!0,validate:!0,className:"my-0 px-2"})))),i.a.createElement("div",{className:"text-center"},i.a.createElement("label",{className:"validatingLabel"},f)),i.a.createElement("div",{className:"container-fluid m-0 p-0",style:{borderStyle:"groove",borderRadius:"10px"}},i.a.createElement("form",{onSubmit:this.addItem,className:"p-0 printHide",ref:function(t){return e.addItemForm=t},noValidate:!0},i.a.createElement("div",{className:"row px-2 m-0"},i.a.createElement("div",{className:"col-md-3 m-0"},i.a.createElement("br",null),i.a.createElement("select",{className:"form-control mt-1",onChange:this.onInput("service"),required:!0,value:s},i.a.createElement("option",{value:"",disabled:!0},"Select Services..."),i.a.createElement("option",{value:"seo"},"SEO"),i.a.createElement("option",{value:"web development"},"Web Development"),i.a.createElement("option",{value:"mob app"},"Mobile App"),i.a.createElement("option",{value:"graphic designing"},"Graphic Designing"))),i.a.createElement("div",{className:"col-md-5 m-0"},i.a.createElement(b.l,{label:"Item-descrption",value:d,type:"text",onChange:this.onInput("detail"),required:!0})),i.a.createElement("div",{className:"col-md-2 m-0"},i.a.createElement(b.l,{label:"Rate",value:m,type:"number",min:"1",onChange:this.onInput("rate"),required:!0})),i.a.createElement("div",{className:"col-md-2 m-0"},i.a.createElement(b.l,{label:"Qty",value:u,type:"number",min:"1",onChange:this.onInput("qty"),required:!0})),i.a.createElement("div",{className:"col-md-2 m-0",style:{marginBottom:"-20px"}},i.a.createElement(b.l,{label:"Price",ref:function(t){return e.price=t},value:m*u,type:"number",min:"1",disabled:!0})),i.a.createElement("div",{className:"col-md-1 m-0 pt-2 align-self-center"},i.a.createElement("button",{type:"submit",color:"transparent",className:"mb-2"},i.a.createElement(b.k,{icon:"plus"}))))),i.a.createElement("div",{className:"row px-2 mx-0 mt-4",style:{display:0===this.state.items.length?"none":""}},i.a.createElement("div",{className:"col-md-12 m-0"},i.a.createElement("div",{className:"m-0 p-0 table-responsive"},i.a.createElement("table",{id:"invoiceTable",className:"table table-bordered table-hover table-sm"},i.a.createElement("thead",{className:"thead-light text-center"},i.a.createElement("tr",{style:{borderTopLeftRadius:"10px",borderTopRightRadius:"10px"}},i.a.createElement("th",null,"Services"),i.a.createElement("th",null,"Description"),i.a.createElement("th",null,"Rate"),i.a.createElement("th",null,"Qty."),i.a.createElement("th",null,"Price"),i.a.createElement("th",{className:"printHide"},"Action"))),i.a.createElement("tbody",null,I))))),i.a.createElement("div",{className:"row px-2 m-0",style:{display:0===this.state.items.length?"none":""}},i.a.createElement("div",{className:"col-md-4 offset-md-8"},i.a.createElement(b.l,{label:"Total",outline:!0,ref:function(t){return e.total_amount=t},value:this.calculateTotal()})))),i.a.createElement("p",{className:"text-center",style:{fontFamily:"monospace"}},"Thank you for doing business with ",N&&N.name,"."),i.a.createElement("div",{className:"row m-0 p-2 justify-content-center printHide"},i.a.createElement("div",{className:"col-md-3 align-self-center p-0"},i.a.createElement("div",{className:"row m-0 p-0"},i.a.createElement("div",{className:"col m-0 p-0 text-right"},i.a.createElement("input",{type:"checkbox",checked:g,onChange:function(){e.setState({printInvoice:!e.state.printInvoice})},style:{width:"30px",height:"30px",verticalAlign:"middle"}})),i.a.createElement("div",{className:"col text-left m-0 p-0 align-self-center"},i.a.createElement("p",{className:"m-0 p-0"},"Print Invoice?")))),i.a.createElement("div",{className:"col-md-3 align-self-center py-0 px-2"},i.a.createElement(b.b,{color:"success",onClick:this.submitInvoice,size:"md",className:"form-control my-0 mx-2 py-2"},i.a.createElement(b.k,{icon:"save",size:"lg",className:"mr-1"}),"Save"))))))))}}]),t}(s.Component),Ze=function(e){return i.a.createElement(h,{I:"create",a:"invoice"},i.a.createElement(Xe,{allData:e.allData}))},et=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"Invoice"},i.a.createElement(Ze,{allData:e}))}}]),t}(s.Component),tt=function(e){var t=new URLSearchParams(window.location.search),a=Number(t.get("invoice"));return i.a.createElement(h,{I:"update",a:"invoice"},i.a.createElement(Xe,{id:a,allData:e.allData}))},at=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"Invoice"},i.a.createElement(tt,{allData:e}))}}]),t}(s.Component),nt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){a.props.history.push({pathname:"/invoices/edit",search:"invoice=".concat(e)})}},a.handleView=function(e){return function(t){a.props.history.push({pathname:"/invoices/view",search:"invoice=".concat(e)})}},a.redirectToNewEntityPath=function(){a.props.history.push("/invoices/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,invoiceToBeDeleted:e.id,invoiceId:e.slagme}),a.refs.deleteModal.setState({modalShow:!0})}},a.deleteInvoice=function(){var e=a.state,t=e.rowToBeDeleted,n=e.invoiceToBeDeleted,l=e.invoiceId,r={method:"DELETE",headers:{"Content-Type":"application/json"}};fetch("/deleteInvoiceDetails/".concat(l),r).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&fetch("/deleteInvoice/".concat(n),r).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&document.getElementById("allInvoicesTable").deleteRow(t)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={rowToBeDeleted:"",invoiceToBeDeleted:"",invoiceId:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.allData,n=a.allInvoices,l=a.allUsers,r=a.allCompanies,o=[],c=0,s={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};return n&&n.forEach((function(e){var a=l&&l.filter((function(t){return t.id===Number(e.c_id)})).shift(),n=r&&r.filter((function(t){return t.id===Number(e.company_id)})).shift();c+=1,o.push({index:c,invoiceId:e.slagme,date:new Date(e.date).toLocaleDateString(),company:n&&n.name,client:a&&a.name,address:e.c_address,cell:e.c_number,total:e.total_amount,buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"invoice"},i.a.createElement(b.b,{style:s,color:"white",onClick:t.handleEdit(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"invoice"},i.a.createElement(b.b,{style:s,color:"white",onClick:t.handleDelete(e),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})})),e={columns:[{label:"#",field:"index"},{label:"Id",field:"invoiceId"},{label:"Date",field:"date"},{label:"Company",field:"company"},{label:"Client",field:"client"},{label:"Address",field:"address"},{label:"Phone no.",field:"cell"},{label:"Amount",field:"total"},{label:"Action",field:"buttons"}],rows:o},i.a.createElement(h,{I:"read",a:"invoice"},i.a.createElement(_,{cardHeading:"Invoices",permissionEntity:"invoice",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Invoice",tableId:"allInvoicesTable",data:e}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteInvoice}))}}]),t}(s.Component),lt=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"Invoice"},i.a.createElement(nt,this.props))}}]),t}(s.Component),rt=function(e){var t,a=e.allData.allInvoiceDetails,n=[],l=0;return a&&a.forEach((function(e){l+=1,n.push({index:l,invoiceId:e.invoice_id,service:e.service,detail:e.detail,qty:e.qty,price:e.price})})),t={columns:[{label:"#",field:"index"},{label:"Invoice-Id",field:"invoiceId"},{label:"Service",field:"service"},{label:"Detail",field:"detail"},{label:"QTY",field:"qty"},{label:"Price",field:"pPrice"}],rows:n},i.a.createElement(h,{I:"read",a:"invoiceDetail"},i.a.createElement(_,{cardHeading:"Invoice-Details",permissionEntity:"invoiceDetail",tableId:"allInvoiceDetailsTable",data:t}))},ot=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"InvoiceDetail"},i.a.createElement(rt,this.props))}}]),t}(s.Component),ct=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentDidMount=function(){var e=a.props,t=e.id,n=e.allData;if(t){var l=n.allCompanies&&n.allCompanies.filter((function(e){return e.id===t})).shift();l&&a.setState({name:l.name,email:l.email,cell:l.cell,address:l.address,editCompany:l.id,existingLogo:l.logo,displayExistingLogo:!0})}},a.handleInput=function(e){"logoAddress"===e.target.name?a.setState(Object(E.a)({selectedFile:e.target.files[0]},e.target.name,e.target.value)):a.setState(Object(E.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){a.refs.validatingLabel.innerHTML="",e.preventDefault();var t=a.refs.newCompanyForm;if(!1!==t.checkValidity()){var n,l=a.state,r=l.name,o=l.email,c=l.cell,s=l.address,i=l.selectedFile,d=l.editCompany,m=l.existingLogo,u=new FormData(a.refs.fakeForm);u.append("image",i),u.append("name",r),u.append("email",o),u.append("cell",c),u.append("address",s),m&&u.append("id",d),m?(n={method:"PUT",body:u},fetch("/deleteImage/".concat(m),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({validatingMessage:e.message}),e.success&&fetch("/updateCompany",n).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({validatingMessage:e.message});var t=e.data;e.success?a.setState({name:t.name,email:t.email,cell:t.cell,address:t.address,logoAddress:"",existingLogo:t.logo,validatingMessage:"",displayExistingLogo:!0}):"This Company already exists."===e.message?a.name.focus():a.logo.focus()})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))):(n={method:"POST",body:u},fetch("/addNewCompany",n).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({validatingMessage:e.message}),e.success?a.setState({name:"",email:"",cell:"",address:"",logoAddress:"",selectedFile:"",validatingMessage:""}):"This Company already exists."===e.message?a.name.focus():a.logo.focus()})).catch((function(e){return console.log(e)})))}else t.classList.add("was-validated")},a._isMounted=!0,a.state={name:"",email:"",cell:"",address:"",logoAddress:"",selectedFile:"",validatingMessage:"",editCompany:!1,existingLogo:!1,displayExistingLogo:!1},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.email,l=t.cell,r=t.address,o=t.logoAddress,c=t.validatingMessage,s=t.editCompany,d=t.existingLogo,m=t.displayExistingLogo;return i.a.createElement(h,{I:"create",a:"company"},i.a.createElement(b.w,{center:!0,className:"mt-5 p-0"},i.a.createElement(b.g,{xl:"4",lg:"5",md:"6",sm:"8",xs:"10"},i.a.createElement("form",{ref:"newCompanyForm",className:"mb-4",onSubmit:this.handleSubmit,noValidate:!0},i.a.createElement("fieldset",{className:"w-100"},i.a.createElement("h2",{className:"fontRaleway colorGreen font-weight-bold mb-4 text-center"},s?"Edit Company":"New Company"),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-edit inputIcon"}),i.a.createElement("input",{name:"name",value:a,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.name=t},required:!0,placeholder:"Name*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-envelope inputIcon"}),i.a.createElement("input",{name:"email",value:n,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.email=t},required:!0,placeholder:"Email*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-phone inputIcon"}),i.a.createElement("input",{name:"cell",value:l,onInput:this.handleInput,onChange:function(){},type:"text",ref:function(t){return e.cell=t},required:!0,placeholder:"Phone*",className:"fontRaleway inputText pl-5 form-control"})),i.a.createElement("div",{className:"mb-2"},i.a.createElement("i",{className:"fa fa-map-marker-alt inputIcon"}),i.a.createElement("textarea",{name:"address",value:r,onInput:this.handleInput,onChange:function(){},type:"textarea",ref:function(t){return e.address=t},rows:"2",required:!0,placeholder:"Address*",className:"fontRaleway inputText pl-5 form-control"})),m?i.a.createElement("div",{className:"mb-2"},i.a.createElement("img",{src:"/getImage/".concat(d),width:"100%",height:"100",alt:"Logo",style:{borderRadius:"7px"}}),i.a.createElement("b",{className:"float-right mr-1 fontRaleway colorBlue hoverGreen",onClick:function(){return e.setState({displayExistingLogo:!1})},style:{cursor:"pointer"}},"Change")):i.a.createElement("div",{className:"mb-2",style:{position:"relative"}},i.a.createElement("input",{name:"logoAddress",type:"file",accept:".jpg, .jpeg, .png,",onInput:this.handleInput,required:!0,className:"inputText"}),i.a.createElement("div",{className:"fakefile inputText"},i.a.createElement("i",{className:"fa fa-file-alt inputIcon"}),i.a.createElement("input",{value:o,onChange:function(){},type:"text",ref:function(t){return e.logo=t},required:!0,placeholder:"Choose file...*",className:"fontRaleway inputText pl-5 form-control"}),i.a.createElement("small",{className:"float-right grey-text"},"PNG or JPG, max size = 3MB"))),i.a.createElement("div",{className:"text-center w-100 mt-0"},i.a.createElement("label",{className:"validatingLabel mt-3",ref:"validatingLabel"},c),i.a.createElement("br",null),i.a.createElement("input",{type:"submit",className:"next action-button my-0",value:s?"Update":"Create.."})))),i.a.createElement("form",{ref:"fakeForm",encType:"multipart/form-data"}))))}}]),t}(s.Component),st=function(e){return i.a.createElement(h,{I:"create",a:"company"},i.a.createElement(ct,{allData:e.allData}))},it=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"create",a:"company"},i.a.createElement(st,null))}}]),t}(s.Component),dt=function(e){var t=new URLSearchParams(window.location.search),a=Number(t.get("company"));return i.a.createElement(h,{I:"update",a:"company"},i.a.createElement(ct,{id:a,allData:e.allData}))},mt=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.allData;return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"update",a:"company"},i.a.createElement(dt,{allData:e}))}}]),t}(s.Component),ut=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.componentWillUnmount=function(){a._isMounted=!1},a.handleEdit=function(e){return function(t){a.props.history.push({pathname:"/invoices/companies/edit",search:"company=".concat(e)})}},a.redirectToNewEntityPath=function(){a.props.history.push("/invoices/companies/new")},a.handleDelete=function(e){return function(t){var n=t.target.closest("tr").rowIndex;a.setState({rowToBeDeleted:n,companyToBeDeleted:e.id,companyLogo:e.logo}),a.refs.deleteModal.setState({modalShow:!0})}},a.deleteCompany=function(){var e=a.state,t=e.rowToBeDeleted,n=e.companyToBeDeleted,l=e.companyLogo,r={method:"DELETE",headers:{"Content-Type":"application/json"}};fetch("/deleteImage/".concat(l),r).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){return console.log(e)})),fetch("/deleteCompany/".concat(n),r).then((function(e){return e.json()})).then((function(e){console.log(e),e.success&&document.getElementById("allCompaniesTable").deleteRow(t)})).catch((function(e){return console.log(e)}))},a._isMounted=!0,a.state={rowToBeDeleted:"",companyToBeDeleted:"",companyLogo:""},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props.allData.allCompanies,n=[],l=0,r={fontSize:"17px",borderRadius:"50%",border:"2px solid #112648"};return a&&a.forEach((function(e){l+=1,n.push({index:l,name:e.name,email:e.email,cell:e.cell,address:e.address,logo:i.a.createElement("img",{src:"/getImage/".concat(e.logo),alt:"Logo",className:"m-0 p-0",width:"120",height:"80"}),buttons:i.a.createElement(i.a.Fragment,null,i.a.createElement(h,{I:"update",a:"company"},i.a.createElement(b.b,{style:r,color:"white",onClick:t.handleEdit(e.id),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"pencil-alt iconGreen"}))),i.a.createElement(h,{I:"delete",a:"company"},i.a.createElement(b.b,{style:r,color:"white",onClick:t.handleDelete(e),className:"m-1 py-1 px-2",size:"sm"},i.a.createElement(b.k,{icon:"trash iconRed"}))))})})),e={columns:[{label:"#",field:"index"},{label:"Name",field:"name"},{label:"Email",field:"email"},{label:"Phone no.",field:"cell"},{label:"Address",field:"address"},{label:"Logo",field:"logo"},{label:"Action",field:"buttons"}],rows:n},i.a.createElement(h,{I:"read",a:"company"},i.a.createElement(_,{cardHeading:"Companies",permissionEntity:"company",redirectToNewEntityPath:this.redirectToNewEntityPath,addButtonEntityLabel:"Company",tableId:"allCompaniesTable",data:e}),i.a.createElement(B,{ref:"deleteModal",deleteEntry:this.deleteCompany}))}}]),t}(s.Component),pt=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this))).user=localStorage.getItem("ui"),e.user?e.loggedIn=!0:e.loggedIn=!1,e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return!1===this.loggedIn?i.a.createElement(m.a,{to:"/login"}):i.a.createElement(h,{I:"read",a:"company"},i.a.createElement(ut,this.props))}}]),t}(s.Component),ht=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/invoices/companies/new",render:function(){return i.a.createElement(it,null)}}),i.a.createElement(m.b,{path:"/invoices/companies/edit",render:function(){return i.a.createElement(mt,{allData:t})}}),i.a.createElement(m.b,{path:"/invoices/companies/all",render:function(e){return i.a.createElement(pt,Object.assign({},e,{allData:t}))}}))},ft=function(e){var t=e.allData;return i.a.createElement(m.d,null,i.a.createElement(m.b,{path:"/invoices/new",render:function(){return i.a.createElement(et,{allData:t})}}),i.a.createElement(m.b,{path:"/invoices/edit",render:function(){return i.a.createElement(at,{allData:t})}}),i.a.createElement(m.b,{path:"/invoices/all",render:function(e){return i.a.createElement(lt,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/invoices/invoice_details",render:function(){return i.a.createElement(ot,{allData:t})}}),i.a.createElement(m.b,{path:"/invoices/companies",render:function(e){return i.a.createElement(ht,Object.assign({},e,{allData:t}))}}))},bt=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.allData,a=e.changeUser;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{},className:"container-fluid"},i.a.createElement(m.d,null,i.a.createElement(m.b,{exact:!0,path:"/",render:function(e){return i.a.createElement(N,Object.assign({},e,{changeUser:a}))}}),i.a.createElement(m.b,{exact:!0,path:"/login",render:function(e){return i.a.createElement(N,Object.assign({},e,{changeUser:a}))}}),i.a.createElement(m.b,{path:"/home",render:function(e){return i.a.createElement(F,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/vendors",render:function(e){return i.a.createElement(A,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/users",render:function(e){return i.a.createElement(te,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/products",render:function(e){return i.a.createElement(Ie,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/inventories",render:function(e){return i.a.createElement(Se,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/orders",render:function(e){return i.a.createElement($e,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{path:"/invoices",render:function(e){return i.a.createElement(ft,Object.assign({},e,{allData:t}))}}),i.a.createElement(m.b,{render:function(){return i.a.createElement(g,null)}}))))}}]),t}(s.Component),gt=function(e){function t(){var e,a;Object(n.a)(this,t);for(var l=arguments.length,c=new Array(l),s=0;s<l;s++)c[s]=arguments[s];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(c)))).state={isOpen:!1},a.toggleCollapse=function(){a.props.loggedIn?a.props.toggleSidebar():a.setState({isOpen:!a.state.isOpen})},a.activeClassToggeler=function(e){var t=document.querySelector(".active");t&&t.classList.remove("active"),e.target.classList.add("active")},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.loggedIn;return i.a.createElement(b.s,{transparent:!0,expand:"sm",style:{boxShadow:"none"},className:"m-0 p-0"},i.a.createElement(b.t,{className:"logoHome my-0 p-0"},i.a.createElement("img",{id:"siteLogo",src:"/logo_homepage.png",width:"224",height:"84",alt:"bucket_ERP"})),i.a.createElement(b.v,{id:"navbarToggler",className:"navbar-light mt-5 p-1 mr-4 ml-2",style:{border:"1px solid #112648"},onClick:this.toggleCollapse}),e?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(b.h,{isOpen:this.state.isOpen,navbar:!0},i.a.createElement(b.u,{right:!0,style:{fontWeight:"800",textTransform:""},className:"navBar row p-0",onClick:this.activeClassToggeler},i.a.createElement(b.q,null,i.a.createElement(b.r,{className:"hoverGreen activeBlue",to:"/login"},"Sign In")),i.a.createElement(b.q,null,i.a.createElement(b.r,{className:"colorGreen hoverBlue activeGreen",to:"/vendors/signup"},"Become Seller ",i.a.createElement("b",{className:"colorBlue"},"...")))))))}}]),t}(s.Component),Et=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(o.a)(t).call(this)))._isMounted=!1,e.onClick=function(t){e.activeClassToggeler(t),e.handleDropDownMenus(t)},e.activeClassToggeler=function(e){var t=document.querySelector(".active");t&&t.classList.remove("active"),e.target.classList.add("active")},e.handleDropDownMenus=function(e){for(var t=document.getElementsByClassName("dropdownMenu"),a=e.target.closest("li"),n=e.target.closest(".dropdownMenu"),l=0;l<t.length;l++)if(a.childElementCount>1)if(t[l]===n)for(var r=function(e){"block"===a.childNodes[e].style.display||""===a.childNodes[e].style.display?(a.childNodes[e].children[0].classList.remove("slideInDown"),a.childNodes[e].children[0].classList.add("slideOutUp"),setTimeout((function(){a.childNodes[e].style.display="none"}),450)):(a.childNodes[e].children[0].classList.remove("slideOutUp"),a.childNodes[e].children[0].classList.add("slideInDown"),a.childNodes[e].style.display="")},o=1;o<a.childNodes.length;o++)r(o);else t[l].nextElementSibling.style.display="none",t[l].nextElementSibling.nextElementSibling&&(t[l].nextElementSibling.nextElementSibling.style.display="none");else t[l].nextElementSibling.style.display="none",t[l].nextElementSibling.nextElementSibling&&(t[l].nextElementSibling.nextElementSibling.style.display="none")},e.state={},e}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=document.getElementsByClassName("dropdownMenu"),a=this.props.loggedIn,n=document.getElementById("sidebarHomeLink");n&&n.classList.add("active");for(var l=0;l<t.length;l++)t[l]&&t[l].nextElementSibling&&(t[l].nextElementSibling.style.display="none"),t[l]&&t[l].nextElementSibling&&t[l].nextElementSibling.nextElementSibling&&(t[l].nextElementSibling.nextElementSibling.style.display="none");return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col text-center mt-5 mb-4 mx-0 p-0"},i.a.createElement("h2",{className:"m-0 p-0 sidebarHeading"},"Dashboard")),i.a.createElement("div",{className:"text-white sidebar"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center"},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-home"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{id:"sidebarHomeLink",to:"/home",onClick:this.onClick},"Home")))),i.a.createElement(h,{I:"read",a:"user"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center dropdownMenu",onClick:this.onClick},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-multiple-users-silhouette"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/users/all"},"Users"))),i.a.createElement(h,{I:"read",a:"role"},i.a.createElement("div",{style:{display:"none"},className:"row m-0 p-0 justify-content-end dropdownItem"},i.a.createElement("div",{className:"col-6 p-0 text-left mr-1 animated"},i.a.createElement(d.b,{to:"/users/roles/all",className:"",style:{fontSize:"0.9vw"}},"Roles")))))),i.a.createElement(h,{I:"read",a:"product"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center dropdownMenu",onClick:this.onClick},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-product"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/products/all"},"Products"))),i.a.createElement(h,{I:"read",a:"productCategory"},i.a.createElement("div",{style:{display:"none"},className:"row m-0 p-0 justify-content-end dropdownItem"},i.a.createElement("div",{className:"col-6 p-0 text-left mr-1 animated"},i.a.createElement(d.b,{to:"/products/categories/all",style:{fontSize:"0.9vw"}},"Categories")))))),i.a.createElement(h,{I:"read",a:"inventories"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center",onClick:this.onClick},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-storage"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/inventories/all"},"Inventory"))))),i.a.createElement(h,{I:"read",a:"order"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center dropdownMenu",onClick:this.onClick},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-box font-weight-bold"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/orders/all"},"Orders"))),i.a.createElement(h,{I:"read",a:"orderDetail"},i.a.createElement("div",{style:{display:"none"},className:"row m-0 p-0 justify-content-end dropdownItem"},i.a.createElement("div",{className:"col-6 p-0 text-left mr-1 animated"},i.a.createElement(d.b,{to:"/orders/order_details",style:{fontSize:"0.9vw"}},"Order-Details")))))),i.a.createElement(h,{I:"read",a:"vendor"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center",onClick:this.onClick},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-vendor"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/vendors/all"},"Vendors"))))),i.a.createElement(h,{I:"read",a:"invoice"},i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center dropdownMenu",onClick:this.onClick},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"fas fa-file-invoice pl-1 text-white"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/invoices/all"},"Invoices"))),i.a.createElement(h,{I:"read",a:"invoiceDetail"},i.a.createElement("div",{style:{display:"none"},className:"row m-0 p-0 justify-content-end dropdownItem"},i.a.createElement("div",{className:"col-6 p-0 text-left mr-1 animated"},i.a.createElement(d.b,{to:"/invoices/invoice_details",style:{fontSize:"0.9vw"}},"Invoice-details")))),i.a.createElement(h,{I:"read",a:"company"},i.a.createElement("div",{style:{display:"none"},className:"row m-0 p-0 justify-content-end dropdownItem"},i.a.createElement("div",{className:"col-6 p-0 text-left mr-1 animated"},i.a.createElement(d.b,{to:"/invoices/companies/all",style:{fontSize:"0.9vw"}},"Companies")))))),a?i.a.createElement("li",{className:"mb-3"},i.a.createElement("div",{className:"row m-0 p-0 align-items-center"},i.a.createElement("div",{className:"col-xl-4 col-lg-4"},i.a.createElement("i",{className:"flaticon-logout"})),i.a.createElement("div",{className:"col-xl-8 col-lg-8 text-left"},i.a.createElement(d.b,{to:"/login",onClick:function(){return e.props.loggingOut()}},"Sign Out")))):null))}}]),t}(s.Component),vt=new f.a,yt=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(o.a)(t).call(this,e)))._isMounted=!1,a.loggingOut=function(){fetch("/logout").then((function(e){return e.json()})).then((function(e){a.setState({loggedIn:!1},(function(){localStorage.removeItem("ui"),localStorage.removeItem("uri");var e=document.getElementById("main");document.getElementById("sidebar").style.width=" 0%",e.style.width="100%",e.style.marginLeft="0px"}))})).catch((function(e){return console.log(e)}))},a.changeUser=function(e){var t,n=a.state.loggedIn,l=a.paths.map((function(e){return fetch(e)}));Promise.all(l).then((function(n){Promise.all(n.map((function(e){return e.json()}))).then((function(n){a._isMounted&&a.setState({allRoles:n[0].data,allPermissions:n[1].data,allRolePermissions:n[2].data,allUsers:n[3].data,allProductCategories:n[4].data,allBrands:n[5].data,allProducts:n[6].data,allInventories:n[7].data,allInventoryHistories:n[8].data,allOrders:n[9].data,allOrderDetails:n[10].data,allInvoices:n[11].data,allInvoiceDetails:n[12].data,allCompanies:n[13].data},(function(){var a=this.state,n=a.allRoles,l=a.allPermissions,r=a.allRolePermissions;n&&n.forEach((function(a){a.id===e.role_id&&(t=a.name)}));var o=function(e,t,a,n){var l,r=f.b.extract(),o=r.can,c=r.rules;if(void 0!==t){t.forEach((function(t){t.name===e&&(l=t.id)}));var s=void 0!==n&&void 0!==l?n.filter((function(e){return e.role_id===l})):void 0,i=[];if(void 0!==s&&void 0!==a&&s.forEach((function(e){a.forEach((function(t){t.id===e.permission_id&&i.push(t)}))})),0!==i.length&&void 0!==i)for(var d=0;d<i.length;d++)o("".concat(i[d].permission),"".concat(i[d].entity))}return c}(t,n,l,r);vt.update(o)}))}))})),n||a.setState({loggedIn:!0})},a.toggleSidebar=function(){var e=document.getElementById("navbarToggler"),t=document.getElementById("siteLogo");224===t.width?t.width=204:t.width=224,e.classList.contains("ml-2")?(e.classList.remove("ml-2","mr-4"),e.classList.add("mr-2")):(e.classList.remove("mr-2"),e.classList.add("mr-4","ml-2"));var a=document.getElementById("sidebar"),n=document.getElementById("main");"12%"!==a.style.width?a.style.width="12%":a.style.width="0%","88%"!==n.style.width?n.style.width="88%":n.style.width="100%","12%"!==n.style.marginLeft?n.style.marginLeft="12%":n.style.marginLeft="0px"},a._isMounted=!0,a.state={user:"",loggedIn:"",allRoles:[],allPermissions:[],allRolePermissions:[],allUsers:[],allProductCategories:[],allBrands:[],allProducts:[],allInventories:[],allInventoryHistories:[],allOrders:[],allOrderDetails:[],allInvoices:[],allInvoiceDetails:[],allCompanies:[]},a.paths=["/getAllRoles","/getAllPermissions","/getAllRolesPermissions","/getAllUsers","/getAllProductCategories","/getAllBrands","/getAllProducts","/getAllInventories","/getAllInventoryHistories","/getAllOrders","/getAllOrderDetails","/getAllInvoices","/getAllInvoiceDetails","/getAllCompanies"],fetch("/isAuth").then((function(e){return e.json()})).then((function(e){var t=e.user;a.setState({user:t,loggedIn:e.loggedIn},(function(){if(!1===e.loggedIn){var a=document.getElementById("sidebar"),n=document.getElementById("main");a.style.width="0%",n.style.width="100%",n.style.marginLeft="0px",(localStorage.getItem("ui")||localStorage.getItem("uri"))&&(localStorage.removeItem("ui"),localStorage.removeItem("uri"))}void 0!==t&&null!==t&&(localStorage.setItem("ui",JSON.stringify(t.id)),localStorage.setItem("uri",JSON.stringify(t.role_id)),this.changeUser(t))}))})),a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,t=e.loggedIn,a={user:e.user,allRoles:e.allRoles,allPermissions:e.allPermissions,allRolePermissions:e.allRolePermissions,allUsers:e.allUsers,allProductCategories:e.allProductCategories,allBrands:e.allBrands,allProducts:e.allProducts,allInventories:e.allInventories,allInventoryHistories:e.allInventoryHistories,allOrders:e.allOrders,allOrderDetails:e.allOrderDetails,allInvoices:e.allInvoices,allInvoiceDetails:e.allInvoiceDetails,allCompanies:e.allCompanies};return i.a.createElement(d.a,null,i.a.createElement(p.Provider,{value:vt},!1===t&&i.a.createElement(m.a,{to:"/login"}),i.a.createElement("div",{className:"row m-0 p-0"},i.a.createElement("div",{id:"sidebar",className:"printHide"},i.a.createElement(Et,{loggingOut:this.loggingOut,loggedIn:t})),i.a.createElement("div",{id:"main"},i.a.createElement(gt,{toggleSidebar:this.toggleSidebar,loggedIn:t}),i.a.createElement(bt,{changeUser:this.changeUser,allData:a})))))}}]),t}(i.a.Component);t.a=yt},83:function(e,t,a){e.exports=a(84)},84:function(e,t,a){"use strict";a.r(t),function(e){var t=a(0),n=a.n(t),l=a(21),r=a.n(l),o=(a(90),a(91),a(92),a(93),a(94),a(95),a(96),a(81)),c=a(79),s=a(80);r.a.render(n.a.createElement(s.a,null,n.a.createElement(o.a,null)),document.getElementById("root")),c.a(),e.hot}.call(this,a(85)(e))},90:function(e,t,a){},97:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.60c1bb71.chunk.js.map